{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../src/Key.svelte","../../src/chords.ts","../../node_modules/midi.js/lib/midi.js","../../src/Keyboard.svelte","../../src/Modal.svelte","../../node_modules/svelte/store/index.mjs","../../src/stores.ts","../../src/Settings.svelte","../../src/App.svelte","../../src/main.ts"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { stylesheet } = info;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            info.rules = {};\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape_attribute_value(value.toString())}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${style_object[key]};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.47.0' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\nfunction validate_dynamic_element(tag) {\n    if (tag && typeof tag !== 'string') {\n        throw new Error('<svelte:element> expects \"this\" attribute to be a string.');\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_dynamic_element, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<script>\n    export let noteNum;\n    export let keyWidth = 56;\n    export let pressed = false;\n    import { createEventDispatcher } from \"svelte\";\n\n    const dispatch = createEventDispatcher();\n    let isNatural = ![1, 3, 6, 8, 10].includes(noteNum % 12);\n    let bias = 0;\n    // the accidental keys are not perfectly in center\n    if (!isNatural) {\n        if ([1, 6].includes(noteNum % 12)) bias = -keyWidth / 12;\n        else if ([3, 10].includes(noteNum % 12)) bias = keyWidth / 12;\n    }\n    export function getNote() {\n        return noteNum;\n    }\n    function keyPressed() {\n        dispatch(\"notepressed\", noteNum);\n    }\n    function keyReleased() {\n        dispatch(\"notereleased\", noteNum);\n    }\n    export function playKey() {\n        if (pressed) return;\n        pressed = true;\n    }\n    export function stopPlayingKey() {\n        if (!pressed) return;\n        pressed = false;\n    }\n</script>\n\n<div\n    class:accidental={!isNatural}\n    class:natural={isNatural}\n    class:pressed\n    style=\"--width: {keyWidth -\n        keyWidth * 0.47 * !isNatural}px; transform: translate({bias}px);\"\n    draggable=\"false\"\n    on:mousedown|preventDefault={keyPressed}\n    on:mouseup|preventDefault={keyReleased}\n    on:mouseenter={(e) => {\n        if (e.buttons) keyPressed();\n    }}\n    on:mouseleave={(e) => {\n        if (e.buttons) keyReleased();\n    }}\n    on:touchstart|preventDefault={keyPressed}\n    on:touchend|preventDefault={keyReleased}\n/>\n\n<style>\n    div {\n        flex-shrink: 0;\n        width: var(--width);\n        min-width: min-content;\n        border-radius: 0px 0px calc(var(--width) / 8) calc(var(--width) / 8);\n        -webkit-user-drag: none;\n    }\n    .accidental {\n        margin: 0px calc(var(--width) / -2) 0px calc(var(--width) / -2);\n        z-index: 2;\n        height: 60%;\n        background: black;\n        box-shadow: inset white 0px 0px 2px 0px;\n    }\n    .natural {\n        height: 100%;\n        box-shadow: inset black 0px 0px 2px 0px;\n    }\n    .accidental.pressed {\n        background: teal;\n    }\n    .accidental:not(.pressed) {\n        background: black;\n        transition: background-color 0.5s ease;\n    }\n    .natural.pressed {\n        background: cyan;\n    }\n    .natural:not(.pressed) {\n        background: white;\n        transition: background-color 0.5s ease;\n    }\n</style>\n","export function notesInChord(start, chordType, inversion = Inversion.Root) {\n    switch (chordType) {\n        case Chord.Major:\n            return majorChordNotes(start, inversion);\n        case Chord.Minor:\n            return minorChordNotes(start, inversion);\n        case Chord.Seventh:\n            return seventhChordNotes(start, inversion);\n        case Chord.MajorSeventh:\n            return majorSeventhChordNotes(start, inversion);\n        default:\n            return [];\n    }\n}\nexport function majorChordNotes(start, inversion = Inversion.Root) {\n    let notes = [start, start + 4, start + 7];\n    applyInversion(notes, inversion);\n    return notes;\n}\nexport function minorChordNotes(start, inversion = Inversion.Root) {\n    let notes = [start, start + 3, start + 7];\n    applyInversion(notes, inversion);\n    return notes;\n}\nexport function seventhChordNotes(start, inversion = Inversion.Root) {\n    let notes = [start, start + 4, start + 7, start + 10];\n    applyInversion(notes, inversion);\n    return notes;\n}\nexport function majorSeventhChordNotes(start, inversion = Inversion.Root) {\n    let notes = [start, start + 4, start + 7, start + 11];\n    applyInversion(notes, inversion);\n    return notes;\n}\nfunction applyInversion(notes, inversion) {\n    switch (inversion) {\n        case Inversion.First:\n            notes[0] += 12;\n            break;\n        case Inversion.Second:\n            notes[0] += 12;\n            notes[1] += 12;\n            break;\n    }\n}\nexport var Chord;\n(function (Chord) {\n    Chord[Chord[\"Major\"] = 0] = \"Major\";\n    Chord[Chord[\"Minor\"] = 1] = \"Minor\";\n    Chord[Chord[\"Seventh\"] = 2] = \"Seventh\";\n    Chord[Chord[\"MajorSeventh\"] = 3] = \"MajorSeventh\";\n})(Chord || (Chord = {}));\nexport var Inversion;\n(function (Inversion) {\n    Inversion[Inversion[\"Root\"] = 0] = \"Root\";\n    Inversion[Inversion[\"First\"] = 1] = \"First\";\n    Inversion[Inversion[\"Second\"] = 2] = \"Second\";\n})(Inversion || (Inversion = {}));\nfunction getNotesInKey(root) {\n    return [0, 2, 4, 5, 7, 9, 11, 12].map((x) => x + root);\n}\nexport function getNthNoteInKey(root, n) {\n    let notes = getNotesInKey(root);\n    return notes[n];\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MIDI\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MIDI\"] = factory();\n\telse\n\t\troot[\"MIDI\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\t__webpack_require__(3);\n\t\n\t__webpack_require__(8);\n\t\n\t__webpack_require__(9);\n\t\n\t__webpack_require__(14);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.MIDI = _root2.default;\n\texports.default = _root2.default;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {};\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; /*\n\t                                                                                                                                                                                                                                                                                ----------------------------------------------------------\n\t                                                                                                                                                                                                                                                                                root.Plugin : 0.3.4 : 2015-03-26\n\t                                                                                                                                                                                                                                                                                ----------------------------------------------------------\n\t                                                                                                                                                                                                                                                                                https://github.com/mudcube/root.js\n\t                                                                                                                                                                                                                                                                                ----------------------------------------------------------\n\t                                                                                                                                                                                                                                                                                Inspired by javax.sound.midi (albeit a super simple version):\n\t                                                                                                                                                                                                                                                                                  http://docs.oracle.com/javase/6/docs/api/javax/sound/midi/package-summary.html\n\t                                                                                                                                                                                                                                                                                ----------------------------------------------------------\n\t                                                                                                                                                                                                                                                                                Technologies\n\t                                                                                                                                                                                                                                                                                ----------------------------------------------------------\n\t                                                                                                                                                                                                                                                                                  Web MIDI API - no native support yet (jazzplugin)\n\t                                                                                                                                                                                                                                                                                  Web Audio API - firefox 25+, chrome 10+, safari 6+, opera 15+\n\t                                                                                                                                                                                                                                                                                  HTML5 Audio Tag - ie 9+, firefox 3.5+, chrome 4+, safari 4+, opera 9.5+, ios 4+, android 2.3+\n\t                                                                                                                                                                                                                                                                                ----------------------------------------------------------\n\t                                                                                                                                                                                                                                                                              */\n\t\n\tvar _utils = __webpack_require__(4);\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_root2.default.Soundfont = {};\n\t_root2.default.DEBUG = true;\n\t_root2.default.USE_XHR = true;\n\t_root2.default.soundfontUrl = './soundfont/';\n\t\n\t/*\n\t  root.loadPlugin({\n\t    onsuccess: function() { },\n\t    onprogress: function(state, percent) { },\n\t    targetFormat: 'mp3', // optionally can force to use MP3 (for instance on mobile networks)\n\t    instrument: 'acoustic_grand_piano', // or 1 (default)\n\t    instruments: [ 'acoustic_grand_piano', 'acoustic_guitar_nylon' ] // or multiple instruments\n\t  })\n\t*/\n\t\n\t_root2.default.loadPlugin = function (opts) {\n\t  if (typeof opts === 'function') {\n\t    opts = { onsuccess: opts };\n\t  }\n\t\n\t  _root2.default.soundfontUrl = opts.soundfontUrl || _root2.default.soundfontUrl;\n\t\n\t  // / Detect the best type of audio to use\n\t  (0, _utils.audioDetect)(function (supports) {\n\t    var hash = window.location.hash;\n\t    var api = '';\n\t\n\t    // / use the most appropriate plugin if not specified\n\t    if (supports[opts.api]) {\n\t      api = opts.api;\n\t    } else if (supports[hash.substr(1)]) {\n\t      api = hash.substr(1);\n\t    } else if (supports.webmidi) {\n\t      api = 'webmidi';\n\t    } else if (window.AudioContext) {\n\t      // Chrome\n\t      api = 'webaudio';\n\t    } else if (window.Audio) {\n\t      // Firefox\n\t      api = 'audiotag';\n\t    }\n\t\n\t    if (connect[api]) {\n\t      // / use audio/ogg when supported\n\t      var audioFormat = void 0;\n\t      if (opts.targetFormat) {\n\t        audioFormat = opts.targetFormat;\n\t      } else {\n\t        // use best quality\n\t        audioFormat = supports['audio/ogg'] ? 'ogg' : 'mp3';\n\t      }\n\t\n\t      // / load the specified plugin\n\t      _root2.default.__api = api;\n\t      _root2.default.__audioFormat = audioFormat;\n\t      _root2.default.supports = supports;\n\t      _root2.default.loadResource(opts);\n\t    }\n\t  });\n\t};\n\t\n\t/*\n\t  root.loadResource({\n\t    onsuccess: function() { },\n\t    onprogress: function(state, percent) { },\n\t    instrument: 'banjo'\n\t  })\n\t*/\n\t\n\t_root2.default.loadResource = function (opts) {\n\t  var instruments = opts.instruments || opts.instrument || 'acoustic_grand_piano';\n\t  // /\n\t  if ((typeof instruments === 'undefined' ? 'undefined' : _typeof(instruments)) !== 'object') {\n\t    if (instruments || instruments === 0) {\n\t      instruments = [instruments];\n\t    } else {\n\t      instruments = [];\n\t    }\n\t  }\n\t  // / convert numeric ids into strings\n\t  for (var i = 0; i < instruments.length; i++) {\n\t    var instrument = instruments[i];\n\t    if (instrument === +instrument) {\n\t      // is numeric\n\t      if (_root2.default.GM.byId[instrument]) {\n\t        instruments[i] = _root2.default.GM.byId[instrument].id;\n\t      }\n\t    }\n\t  }\n\t  // /\n\t  opts.format = _root2.default.__audioFormat;\n\t  opts.instruments = instruments;\n\t  // /\n\t  connect[_root2.default.__api](opts);\n\t};\n\t\n\tvar connect = {\n\t  webmidi: function webmidi(opts) {\n\t    // cant wait for this to be standardized!\n\t    _root2.default.WebMIDI.connect(opts);\n\t  },\n\t  audiotag: function audiotag(opts) {\n\t    // works ok, kinda like a drunken tuna fish, across the board\n\t    // http://caniuse.com/audio\n\t    requestQueue(opts, 'AudioTag');\n\t  },\n\t  webaudio: function webaudio(opts) {\n\t    // works awesome! safari, chrome and firefox support\n\t    // http://caniuse.com/web-audio\n\t    requestQueue(opts, 'WebAudio');\n\t  }\n\t};\n\t\n\tvar requestQueue = function requestQueue(opts, context) {\n\t  var audioFormat = opts.format;\n\t  var instruments = opts.instruments;\n\t  var onprogress = opts.onprogress;\n\t  var onerror = opts.onerror;\n\t  // /\n\t  var length = instruments.length;\n\t  var pending = length;\n\t  var waitForEnd = function waitForEnd() {\n\t    if (! --pending) {\n\t      onprogress && onprogress('load', 1.0);\n\t      _root2.default[context].connect(opts);\n\t    }\n\t  };\n\t  // /\n\t  for (var i = 0; i < length; i++) {\n\t    var instrumentId = instruments[i];\n\t    if (_root2.default.Soundfont[instrumentId]) {\n\t      // already loaded\n\t      waitForEnd();\n\t    } else {\n\t      // needs to be requested\n\t      sendRequest(instruments[i], audioFormat, function (evt, progress) {\n\t        var fileProgress = progress / length;\n\t        var queueProgress = (length - pending) / length;\n\t        onprogress && onprogress('load', fileProgress + queueProgress, instrumentId);\n\t      }, function () {\n\t        waitForEnd();\n\t      }, onerror);\n\t    }\n\t  }\n\t};\n\t\n\tvar sendRequest = function sendRequest(instrumentId, audioFormat, onprogress, _onsuccess, onerror) {\n\t  var soundfontPath = _root2.default.soundfontUrl + instrumentId + '-' + audioFormat + '.js';\n\t  if (_root2.default.USE_XHR) {\n\t    (0, _utils.request)({\n\t      url: soundfontPath,\n\t      format: 'text',\n\t      onerror: onerror,\n\t      onprogress: onprogress,\n\t      onsuccess: function onsuccess(event, responseText) {\n\t        var script = document.createElement('script');\n\t        script.language = 'javascript';\n\t        script.type = 'text/javascript';\n\t        script.text = responseText;\n\t        document.body.appendChild(script);\n\t        _onsuccess();\n\t      }\n\t    });\n\t  } else {\n\t    _utils.loadScript.add({\n\t      url: soundfontPath,\n\t      verify: 'root.Soundfont[\"' + instrumentId + '\"]',\n\t      onerror: onerror,\n\t      onsuccess: function onsuccess() {\n\t        _onsuccess();\n\t      }\n\t    });\n\t  }\n\t};\n\t\n\t_root2.default.setDefaultPlugin = function (midi) {\n\t  for (var key in midi) {\n\t    _root2.default[key] = midi[key];\n\t  }\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _audioDetect = __webpack_require__(5);\n\t\n\tObject.keys(_audioDetect).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _audioDetect[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _loadScript = __webpack_require__(6);\n\t\n\tObject.keys(_loadScript).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _loadScript[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _request = __webpack_require__(7);\n\t\n\tObject.keys(_request).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _request[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/*\n\t  ----------------------------------------------------------\n\t  midi.audioDetect : 0.3.2 : 2015-03-26\n\t  ----------------------------------------------------------\n\t  https://github.com/mudcube/midi.js\n\t  ----------------------------------------------------------\n\t  Probably, Maybe, No... Absolutely!\n\t  Test to see what types of <audio> MIME types are playable by the browser.\n\t  ----------------------------------------------------------\n\t*/\n\t\n\tvar supports = {}; // object of supported file types\n\tvar pending = 0; // pending file types to process\n\tvar canPlayThrough = function canPlayThrough(src) {\n\t  // check whether format plays through\n\t  pending++;\n\t  var body = document.body;\n\t  var audio = new window.Audio();\n\t  var mime = src.split(';')[0];\n\t  audio.id = 'audio';\n\t  audio.setAttribute('preload', 'auto');\n\t  audio.setAttribute('audiobuffer', true);\n\t  audio.addEventListener('error', function () {\n\t    body.removeChild(audio);\n\t    supports[mime] = false;\n\t    pending--;\n\t  }, false);\n\t  audio.addEventListener('canplaythrough', function () {\n\t    body.removeChild(audio);\n\t    supports[mime] = true;\n\t    pending--;\n\t  }, false);\n\t  audio.src = 'data:' + src;\n\t  body.appendChild(audio);\n\t};\n\t\n\tvar audioDetect = exports.audioDetect = function audioDetect(onsuccess) {\n\t  // / detect jazz-midi plugin\n\t  if (navigator.requestMIDIAccess) {\n\t    var isNative = Function.prototype.toString.call(navigator.requestMIDIAccess).indexOf('[native code]');\n\t    if (isNative) {\n\t      // has native midiapi support\n\t      supports['webmidi'] = true;\n\t    } else {\n\t      // check for jazz plugin midiapi support\n\t      for (var n = 0; navigator.plugins.length > n; n++) {\n\t        var plugin = navigator.plugins[n];\n\t        if (plugin.name.indexOf('Jazz-Plugin') >= 0) {\n\t          supports['webmidi'] = true;\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  // / check whether <audio> tag is supported\n\t  if (typeof window.Audio === 'undefined') {\n\t    return onsuccess({});\n\t  } else {\n\t    supports['audiotag'] = true;\n\t  }\n\t\n\t  // / check for webaudio api support\n\t  if (window.AudioContext || window.webkitAudioContext) {\n\t    supports['webaudio'] = true;\n\t  }\n\t\n\t  // / check whether canPlayType is supported\n\t  var audio = new window.Audio();\n\t  if (typeof audio.canPlayType === 'undefined') {\n\t    return onsuccess(supports);\n\t  }\n\t\n\t  // / see what we can learn from the browser\n\t  var vorbis = audio.canPlayType('audio/ogg; codecs=\"vorbis\"');\n\t  vorbis = vorbis === 'probably' || vorbis === 'maybe';\n\t  var mpeg = audio.canPlayType('audio/mpeg');\n\t  mpeg = mpeg === 'probably' || mpeg === 'maybe';\n\t  // maybe nothing is supported\n\t  if (!vorbis && !mpeg) {\n\t    onsuccess(supports);\n\t    return;\n\t  }\n\t\n\t  // / or maybe something is supported\n\t  if (vorbis) canPlayThrough('audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA=');\n\t  if (mpeg) canPlayThrough('audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq');\n\t\n\t  // / lets find out!\n\t  var time = new Date().getTime();\n\t  var interval = window.setInterval(function () {\n\t    var now = new Date().getTime();\n\t    var maxExecution = now - time > 5000;\n\t    if (!pending || maxExecution) {\n\t      window.clearInterval(interval);\n\t      onsuccess(supports);\n\t    }\n\t  }, 1);\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t/*\n\t  -----------------------------------------------------------\n\t  loadScript.js : 0.1.4 : 2014/02/12 : http://mudcu.be\n\t  -----------------------------------------------------------\n\t  Copyright 2011-2014 Mudcube. All rights reserved.\n\t  -----------------------------------------------------------\n\t  /// No verification\n\t  loadScript.add(\"../js/jszip/jszip.js\")\n\t  /// Strict loading order and verification.\n\t  loadScript.add({\n\t    strictOrder: true,\n\t    urls: [\n\t      {\n\t        url: \"../js/jszip/jszip.js\",\n\t        verify: \"JSZip\",\n\t        onsuccess: function() {\n\t          console.log(1)\n\t        }\n\t      },\n\t      {\n\t        url: \"../inc/downloadify/js/swfobject.js\",\n\t        verify: \"swfobject\",\n\t        onsuccess: function() {\n\t          console.log(2)\n\t        }\n\t      }\n\t    ],\n\t    onsuccess: function() {\n\t      console.log(3)\n\t    }\n\t  })\n\t  /// Just verification.\n\t  loadScript.add({\n\t    url: \"../js/jszip/jszip.js\",\n\t    verify: \"JSZip\",\n\t    onsuccess: function() {\n\t      console.log(1)\n\t    }\n\t  })\n\t*/\n\t\n\tvar _globalExists = function _globalExists(path, root) {\n\t  try {\n\t    path = path.split('\"').join('').split(\"'\").join('').split(']').join('').split('[').join('.');\n\t    var parts = path.split('.');\n\t    var length = parts.length;\n\t    var object = root || window;\n\t    for (var n = 0; n < length; n++) {\n\t      var key = parts[n];\n\t      if (object[key] == null) {\n\t        return false;\n\t      } else {\n\t        //\n\t        object = object[key];\n\t      }\n\t    }\n\t    return true;\n\t  } catch (e) {\n\t    return false;\n\t  }\n\t};\n\t\n\tvar LoadScript = function LoadScript() {\n\t  this.loaded = {};\n\t  this.loading = {};\n\t  return this;\n\t};\n\t\n\tLoadScript.prototype.add = function (config) {\n\t  var that = this;\n\t  if (typeof config === 'string') {\n\t    config = { url: config };\n\t  }\n\t  var urls = config.urls;\n\t  if (typeof urls === 'undefined') {\n\t    urls = [{\n\t      url: config.url,\n\t      verify: config.verify\n\t    }];\n\t  }\n\t  // / adding the elements to the head\n\t  var doc = document.getElementsByTagName('head')[0];\n\t  // /\n\t  var testElement = function testElement(element, test) {\n\t    if (that.loaded[element.url]) return;\n\t    if (test && _globalExists(test) === false) return;\n\t    that.loaded[element.url] = true;\n\t    //\n\t    if (that.loading[element.url]) that.loading[element.url]();\n\t    delete that.loading[element.url];\n\t    //\n\t    if (element.onsuccess) element.onsuccess();\n\t    if (typeof getNext !== 'undefined') getNext();\n\t  };\n\t  // /\n\t  var hasError = false;\n\t  var batchTest = [];\n\t  var addElement = function addElement(element) {\n\t    if (typeof element === 'string') {\n\t      element = {\n\t        url: element,\n\t        verify: config.verify\n\t      };\n\t    }\n\t    if (/([\\w\\d.\\[\\]'\"])$/.test(element.verify)) {\n\t      // check whether its a variable reference\n\t      var verify = element.test = element.verify;\n\t      if ((typeof verify === 'undefined' ? 'undefined' : _typeof(verify)) === 'object') {\n\t        for (var n = 0; n < verify.length; n++) {\n\t          batchTest.push(verify[n]);\n\t        }\n\t      } else {\n\t        batchTest.push(verify);\n\t      }\n\t    }\n\t    if (that.loaded[element.url]) return;\n\t    var script = document.createElement('script');\n\t    script.onreadystatechange = function () {\n\t      if (this.readyState !== 'loaded' && this.readyState !== 'complete') return;\n\t      testElement(element);\n\t    };\n\t    script.onload = function () {\n\t      testElement(element);\n\t    };\n\t    script.onerror = function () {\n\t      hasError = true;\n\t      delete that.loading[element.url];\n\t      if (_typeof(element.test) === 'object') {\n\t        for (var key in element.test) {\n\t          removeTest(element.test[key]);\n\t        }\n\t      } else {\n\t        removeTest(element.test);\n\t      }\n\t    };\n\t    script.setAttribute('type', 'text/javascript');\n\t    script.setAttribute('src', element.url);\n\t    doc.appendChild(script);\n\t    that.loading[element.url] = function () {};\n\t  };\n\t  // / checking to see whether everything loaded properly\n\t  var removeTest = function removeTest(test) {\n\t    var ret = [];\n\t    for (var n = 0; n < batchTest.length; n++) {\n\t      if (batchTest[n] === test) continue;\n\t      ret.push(batchTest[n]);\n\t    }\n\t    batchTest = ret;\n\t  };\n\t  var onLoad = function onLoad(element) {\n\t    if (element) {\n\t      testElement(element, element.test);\n\t    } else {\n\t      for (var n = 0; n < urls.length; n++) {\n\t        testElement(urls[n], urls[n].test);\n\t      }\n\t    }\n\t    var istrue = true;\n\t    for (var _n = 0; _n < batchTest.length; _n++) {\n\t      if (_globalExists(batchTest[_n]) === false) {\n\t        istrue = false;\n\t      }\n\t    }\n\t    if (!config.strictOrder && istrue) {\n\t      // finished loading all the requested scripts\n\t      if (hasError) {\n\t        if (config.error) {\n\t          config.error();\n\t        }\n\t      } else if (config.onsuccess) {\n\t        config.onsuccess();\n\t      }\n\t    } else {\n\t      // keep calling back the function\n\t      setTimeout(function () {\n\t        // - should get slower over time?\n\t        onLoad(element);\n\t      }, 10);\n\t    }\n\t  };\n\t  // / loading methods;  strict ordering or loose ordering\n\t  if (config.strictOrder) {\n\t    var ID = -1;\n\t    var getNext = function getNext() {\n\t      ID++;\n\t      if (!urls[ID]) {\n\t        // all elements are loaded\n\t        if (hasError) {\n\t          if (config.error) {\n\t            config.error();\n\t          }\n\t        } else if (config.onsuccess) {\n\t          config.onsuccess();\n\t        }\n\t      } else {\n\t        // loading new script\n\t        var element = urls[ID];\n\t        var url = element.url;\n\t        if (that.loading[url]) {\n\t          // already loading from another call (attach to event)\n\t          that.loading[url] = function () {\n\t            if (element.onsuccess) element.onsuccess();\n\t            getNext();\n\t          };\n\t        } else if (!that.loaded[url]) {\n\t          // create script element\n\t          addElement(element);\n\t          onLoad(element);\n\t        } else {\n\t          // it's already been successfully loaded\n\t          getNext();\n\t        }\n\t      }\n\t    };\n\t    getNext();\n\t  } else {\n\t    // loose ordering\n\t    for (var _ID = 0; _ID < urls.length; _ID++) {\n\t      addElement(urls[_ID]);\n\t      onLoad(urls[_ID]);\n\t    }\n\t  }\n\t};\n\t\n\tvar loadScript = exports.loadScript = new LoadScript();\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.request = request;\n\t/*\n\t  ----------------------------------------------------------\n\t  Request : 0.1.1 : 2015-03-26\n\t  ----------------------------------------------------------\n\t  request({\n\t    url: './dir/something.extension',\n\t    data: 'test!',\n\t    format: 'text', // text | xml | json | binary\n\t    responseType: 'text', // arraybuffer | blob | document | json | text\n\t    headers: {},\n\t    withCredentials: true, // true | false\n\t    ///\n\t    onerror: function(evt, percent) {\n\t      console.log(evt)\n\t    },\n\t    onsuccess: function(evt, responseText) {\n\t      console.log(responseText)\n\t    },\n\t    onprogress: function(evt, percent) {\n\t      percent = Math.round(percent * 100)\n\t      loader.create('thread', 'loading... ', percent)\n\t    }\n\t  })\n\t*/\n\t\n\tfunction request(opts, onsuccess, onerror, onprogress) {\n\t  if (typeof opts === 'string') opts = { url: opts };\n\t  var data = opts.data;\n\t  var url = opts.url;\n\t  var method = opts.method || (opts.data ? 'POST' : 'GET');\n\t  var format = opts.format;\n\t  var headers = opts.headers;\n\t  var responseType = opts.responseType;\n\t  var withCredentials = opts.withCredentials || false;\n\t  var xhr = new window.XMLHttpRequest();\n\t  onsuccess = onsuccess || opts.onsuccess;\n\t  onerror = onerror || opts.onerror;\n\t  onprogress = onprogress || opts.onprogress;\n\t  xhr.open(method, url, true);\n\t  if (headers) {\n\t    for (var type in headers) {\n\t      xhr.setRequestHeader(type, headers[type]);\n\t    }\n\t  } else if (data) {\n\t    // set the default headers for POST\n\t    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\t  }\n\t  if (format === 'binary') {\n\t    // - default to responseType=\"blob\" when supported\n\t    if (xhr.overrideMimeType) {\n\t      xhr.overrideMimeType('text/plain; charset=x-user-defined');\n\t    }\n\t  }\n\t  if (responseType) {\n\t    xhr.responseType = responseType;\n\t  }\n\t  if (withCredentials) {\n\t    xhr.withCredentials = 'true';\n\t  }\n\t  if (onerror && 'onerror' in xhr) {\n\t    xhr.onerror = onerror;\n\t  }\n\t  if (onprogress && xhr.upload && 'onprogress' in xhr.upload) {\n\t    if (data) {\n\t      xhr.upload.onprogress = function (evt) {\n\t        onprogress.call(xhr, evt, evt.loaded / evt.total);\n\t      };\n\t    } else {\n\t      xhr.addEventListener('progress', function (evt) {\n\t        var totalBytes = 0;\n\t        if (evt.lengthComputable) {\n\t          totalBytes = evt.total;\n\t        } else if (xhr.totalBytes) {\n\t          totalBytes = xhr.totalBytes;\n\t        } else {\n\t          var rawBytes = parseInt(xhr.getResponseHeader('Content-Length-Raw'));\n\t          if (isFinite(rawBytes)) {\n\t            xhr.totalBytes = totalBytes = rawBytes;\n\t          } else {\n\t            return;\n\t          }\n\t        }\n\t        onprogress.call(xhr, evt, evt.loaded / totalBytes);\n\t      });\n\t    }\n\t  }\n\t  // /\n\t  xhr.onreadystatechange = function (evt) {\n\t    if (xhr.readyState === 4) {\n\t      // The request is complete\n\t      if (xhr.status === 200 || // Response OK\n\t      xhr.status === 304 || // Not Modified\n\t      xhr.status === 308 // Permanent Redirect\n\t      ) {\n\t          if (onsuccess) {\n\t            var res;\n\t            if (format === 'xml') {\n\t              res = evt.target.responseXML;\n\t            } else if (format === 'text') {\n\t              res = evt.target.responseText;\n\t            } else if (format === 'json') {\n\t              try {\n\t                res = JSON.parse(evt.target.response);\n\t              } catch (err) {\n\t                onerror && onerror.call(xhr, evt);\n\t              }\n\t            }\n\t            onsuccess.call(xhr, evt, res);\n\t          }\n\t        } else {\n\t        onerror && onerror.call(xhr, evt);\n\t      }\n\t    }\n\t  };\n\t  xhr.send(data);\n\t  return xhr;\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_root2.default.GM = function (map) {\n\t  var clean = function clean(name) {\n\t    return name.replace(/[^a-z0-9 ]/gi, '').replace(/[ ]/g, '_').toLowerCase();\n\t  };\n\t  var res = {\n\t    byName: {},\n\t    byId: {},\n\t    byCategory: {}\n\t  };\n\t  for (var key in map) {\n\t    var list = map[key];\n\t    for (var n = 0, length = list.length; n < length; n++) {\n\t      var instrument = list[n];\n\t      if (!instrument) continue;\n\t      var num = parseInt(instrument.substr(0, instrument.indexOf(' ')), 10);\n\t      instrument = instrument.replace(num + ' ', '');\n\t      res.byId[--num] = res.byName[clean(instrument)] = res.byCategory[clean(key)] = {\n\t        id: clean(instrument),\n\t        instrument: instrument,\n\t        number: num,\n\t        category: key\n\t      };\n\t    }\n\t  }\n\t  return res;\n\t}({\n\t  'Piano': ['1 Acoustic Grand Piano', '2 Bright Acoustic Piano', '3 Electric Grand Piano', '4 Honky-tonk Piano', '5 Electric Piano 1', '6 Electric Piano 2', '7 Harpsichord', '8 Clavinet'],\n\t  'Chromatic Percussion': ['9 Celesta', '10 Glockenspiel', '11 Music Box', '12 Vibraphone', '13 Marimba', '14 Xylophone', '15 Tubular Bells', '16 Dulcimer'],\n\t  'Organ': ['17 Drawbar Organ', '18 Percussive Organ', '19 Rock Organ', '20 Church Organ', '21 Reed Organ', '22 Accordion', '23 Harmonica', '24 Tango Accordion'],\n\t  'Guitar': ['25 Acoustic Guitar (nylon)', '26 Acoustic Guitar (steel)', '27 Electric Guitar (jazz)', '28 Electric Guitar (clean)', '29 Electric Guitar (muted)', '30 Overdriven Guitar', '31 Distortion Guitar', '32 Guitar Harmonics'],\n\t  'Bass': ['33 Acoustic Bass', '34 Electric Bass (finger)', '35 Electric Bass (pick)', '36 Fretless Bass', '37 Slap Bass 1', '38 Slap Bass 2', '39 Synth Bass 1', '40 Synth Bass 2'],\n\t  'Strings': ['41 Violin', '42 Viola', '43 Cello', '44 Contrabass', '45 Tremolo Strings', '46 Pizzicato Strings', '47 Orchestral Harp', '48 Timpani'],\n\t  'Ensemble': ['49 String Ensemble 1', '50 String Ensemble 2', '51 Synth Strings 1', '52 Synth Strings 2', '53 Choir Aahs', '54 Voice Oohs', '55 Synth Choir', '56 Orchestra Hit'],\n\t  'Brass': ['57 Trumpet', '58 Trombone', '59 Tuba', '60 Muted Trumpet', '61 French Horn', '62 Brass Section', '63 Synth Brass 1', '64 Synth Brass 2'],\n\t  'Reed': ['65 Soprano Sax', '66 Alto Sax', '67 Tenor Sax', '68 Baritone Sax', '69 Oboe', '70 English Horn', '71 Bassoon', '72 Clarinet'],\n\t  'Pipe': ['73 Piccolo', '74 Flute', '75 Recorder', '76 Pan Flute', '77 Blown Bottle', '78 Shakuhachi', '79 Whistle', '80 Ocarina'],\n\t  'Synth Lead': ['81 Lead 1 (square)', '82 Lead 2 (sawtooth)', '83 Lead 3 (calliope)', '84 Lead 4 (chiff)', '85 Lead 5 (charang)', '86 Lead 6 (voice)', '87 Lead 7 (fifths)', '88 Lead 8 (bass + lead)'],\n\t  'Synth Pad': ['89 Pad 1 (new age)', '90 Pad 2 (warm)', '91 Pad 3 (polysynth)', '92 Pad 4 (choir)', '93 Pad 5 (bowed)', '94 Pad 6 (metallic)', '95 Pad 7 (halo)', '96 Pad 8 (sweep)'],\n\t  'Synth Effects': ['97 FX 1 (rain)', '98 FX 2 (soundtrack)', '99 FX 3 (crystal)', '100 FX 4 (atmosphere)', '101 FX 5 (brightness)', '102 FX 6 (goblins)', '103 FX 7 (echoes)', '104 FX 8 (sci-fi)'],\n\t  'Ethnic': ['105 Sitar', '106 Banjo', '107 Shamisen', '108 Koto', '109 Kalimba', '110 Bagpipe', '111 Fiddle', '112 Shanai'],\n\t  'Percussive': ['113 Tinkle Bell', '114 Agogo', '115 Steel Drums', '116 Woodblock', '117 Taiko Drum', '118 Melodic Tom', '119 Synth Drum'],\n\t  'Sound effects': ['120 Reverse Cymbal', '121 Guitar Fret Noise', '122 Breath Noise', '123 Seashore', '124 Bird Tweet', '125 Telephone Ring', '126 Helicopter', '127 Applause', '128 Gunshot']\n\t});\n\t\n\t/* get/setInstrument\n\t--------------------------------------------------- */\n\t/*\n\t  ----------------------------------------------------------\n\t  GeneralMIDI\n\t  ----------------------------------------------------------\n\t*/\n\t\n\t_root2.default.getInstrument = function (channelId) {\n\t  var channel = _root2.default.channels[channelId];\n\t  return channel && channel.instrument;\n\t};\n\t\n\t_root2.default.setInstrument = function (channelId, program, delay) {\n\t  var channel = _root2.default.channels[channelId];\n\t  if (delay) {\n\t    return setTimeout(function () {\n\t      channel.instrument = program;\n\t    }, delay);\n\t  } else {\n\t    channel.instrument = program;\n\t  }\n\t};\n\t\n\t/* get/setMono\n\t--------------------------------------------------- */\n\t_root2.default.getMono = function (channelId) {\n\t  var channel = _root2.default.channels[channelId];\n\t  return channel && channel.mono;\n\t};\n\t\n\t_root2.default.setMono = function (channelId, truthy, delay) {\n\t  var channel = _root2.default.channels[channelId];\n\t  if (delay) {\n\t    return setTimeout(function () {\n\t      channel.mono = truthy;\n\t    }, delay);\n\t  } else {\n\t    channel.mono = truthy;\n\t  }\n\t};\n\t\n\t/* get/setOmni\n\t--------------------------------------------------- */\n\t_root2.default.getOmni = function (channelId) {\n\t  var channel = _root2.default.channels[channelId];\n\t  return channel && channel.omni;\n\t};\n\t\n\t_root2.default.setOmni = function (channelId, truthy, delay) {\n\t  var channel = _root2.default.channels[channelId];\n\t  if (delay) {\n\t    return setTimeout(function () {\n\t      channel.omni = truthy;\n\t    }, delay);\n\t  } else {\n\t    channel.omni = truthy;\n\t  }\n\t};\n\t\n\t/* get/setSolo\n\t--------------------------------------------------- */\n\t_root2.default.getSolo = function (channelId) {\n\t  var channel = _root2.default.channels[channelId];\n\t  return channel && channel.solo;\n\t};\n\t\n\t_root2.default.setSolo = function (channelId, truthy, delay) {\n\t  var channel = _root2.default.channels[channelId];\n\t  if (delay) {\n\t    return setTimeout(function () {\n\t      channel.solo = truthy;\n\t    }, delay);\n\t  } else {\n\t    channel.solo = truthy;\n\t  }\n\t};\n\t\n\t/* channels\n\t--------------------------------------------------- */\n\t_root2.default.channels = function () {\n\t  // 0 - 15 channels\n\t  var channels = {};\n\t  for (var i = 0; i < 16; i++) {\n\t    channels[i] = { // default values\n\t      instrument: i,\n\t      pitchBend: 0,\n\t      mute: false,\n\t      mono: false,\n\t      omni: false,\n\t      solo: false\n\t    };\n\t  }\n\t  return channels;\n\t}();\n\t\n\t/* note conversions\n\t--------------------------------------------------- */\n\t_root2.default.keyToNote = {}; // C8  == 108\n\t_root2.default.noteToKey = {}; // 108 ==  C8\n\t\n\t~function () {\n\t  var A0 = 0x15; // first note\n\t  var C8 = 0x6C; // last note\n\t  var number2key = ['C', 'Db', 'D', 'Eb', 'E', 'F', 'Gb', 'G', 'Ab', 'A', 'Bb', 'B'];\n\t  for (var n = A0; n <= C8; n++) {\n\t    var octave = (n - 12) / 12 >> 0;\n\t    var name = number2key[n % 12] + octave;\n\t    _root2.default.keyToNote[name] = n;\n\t    _root2.default.noteToKey[n] = name;\n\t  }\n\t}();\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _jasmid = __webpack_require__(10);\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*\n\t  ----------------------------------------------------------\n\t  midi.Player : 0.3.1 : 2015-03-26\n\t  ----------------------------------------------------------\n\t  https://github.com/mudcube/midi.js\n\t  ----------------------------------------------------------\n\t*/\n\t\n\t(function () {\n\t  _root2.default.Player = {};\n\t  var player = _root2.default.Player;\n\t  player.currentTime = 0;\n\t  player.endTime = 0;\n\t  player.restart = 0;\n\t  player.playing = false;\n\t  player.timeWarp = 1;\n\t  player.startDelay = 0;\n\t  player.BPM = 120;\n\t\n\t  player.start = player.resume = function (onsuccess) {\n\t    if (player.currentTime < -1) {\n\t      player.currentTime = -1;\n\t    }\n\t    startAudio(player.currentTime, null, onsuccess);\n\t  };\n\t\n\t  player.pause = function () {\n\t    var tmp = player.restart;\n\t    stopAudio();\n\t    player.restart = tmp;\n\t  };\n\t\n\t  player.stop = function () {\n\t    stopAudio();\n\t    player.restart = 0;\n\t    player.currentTime = 0;\n\t  };\n\t\n\t  player.addListener = function (onsuccess) {\n\t    onMidiEvent = onsuccess;\n\t  };\n\t\n\t  player.removeListener = function () {\n\t    onMidiEvent = undefined;\n\t  };\n\t\n\t  player.clearAnimation = function () {\n\t    if (player.animationFrameId) {\n\t      window.cancelAnimationFrame(player.animationFrameId);\n\t    }\n\t  };\n\t\n\t  player.setAnimation = function (callback) {\n\t    var currentTime = 0;\n\t    var tOurTime = 0;\n\t    var tTheirTime = 0;\n\t    //\n\t    player.clearAnimation();\n\t    // /\n\t    var frame = function frame() {\n\t      player.animationFrameId = window.requestAnimationFrame(frame);\n\t      // /\n\t      if (player.endTime === 0) {\n\t        return;\n\t      }\n\t      if (player.playing) {\n\t        currentTime = tTheirTime === player.currentTime ? tOurTime - Date.now() : 0;\n\t        if (player.currentTime === 0) {\n\t          currentTime = 0;\n\t        } else {\n\t          currentTime = player.currentTime - currentTime;\n\t        }\n\t        if (tTheirTime !== player.currentTime) {\n\t          tOurTime = Date.now();\n\t          tTheirTime = player.currentTime;\n\t        }\n\t      } else {\n\t        // paused\n\t        currentTime = player.currentTime;\n\t      }\n\t      // /\n\t      var endTime = player.endTime;\n\t      // var percent = currentTime / endTime\n\t      var total = currentTime / 1000;\n\t      var minutes = total / 60;\n\t      var seconds = total - minutes * 60;\n\t      var t1 = minutes * 60 + seconds;\n\t      var t2 = endTime / 1000;\n\t      // /\n\t      if (t2 - t1 < -1.0) {\n\t        return;\n\t      } else {\n\t        callback({\n\t          now: t1,\n\t          end: t2,\n\t          events: noteRegistrar\n\t        });\n\t      }\n\t    };\n\t    // /\n\t    window.requestAnimationFrame(frame);\n\t  };\n\t\n\t  // helpers\n\t\n\t  player.loadMidiFile = function (onsuccess, onprogress, onerror) {\n\t    try {\n\t      // console.log(MidiFile(player.currentData), new Replayer(MidiFile(player.currentData), player.timeWarp, null, player.BPM))\n\t      player.replayer = new _jasmid.Replayer((0, _jasmid.MidiFile)(player.currentData), player.timeWarp, null, player.BPM);\n\t      player.data = player.replayer.getData();\n\t      player.endTime = getLength();\n\t      // /\n\t      _root2.default.loadPlugin({\n\t        // instruments: player.getFileInstruments(),\n\t        onsuccess: onsuccess,\n\t        onprogress: onprogress,\n\t        onerror: onerror\n\t      });\n\t    } catch (event) {\n\t      console.error(event);\n\t      onerror && onerror(event);\n\t    }\n\t  };\n\t\n\t  player.loadFile = function (file, onsuccess, onprogress, onerror) {\n\t    player.stop();\n\t    if (file.indexOf('base64,') !== -1) {\n\t      var data = window.atob(file.split(',')[1]);\n\t      player.currentData = data;\n\t      player.loadMidiFile(onsuccess, onprogress, onerror);\n\t    } else {\n\t      var fetch = new window.XMLHttpRequest();\n\t      fetch.open('GET', file);\n\t      fetch.overrideMimeType('text/plain; charset=x-user-defined');\n\t      fetch.onreadystatechange = function () {\n\t        if (this.readyState === 4) {\n\t          if (this.status === 200) {\n\t            var t = this.responseText || '';\n\t            var ff = [];\n\t            var mx = t.length;\n\t            var scc = String.fromCharCode;\n\t            for (var z = 0; z < mx; z++) {\n\t              ff[z] = scc(t.charCodeAt(z) & 255);\n\t            }\n\t            // /\n\t            var data = ff.join('');\n\t            player.currentData = data;\n\t            player.loadMidiFile(onsuccess, onprogress, onerror);\n\t          } else {\n\t            onerror && onerror('Unable to load MIDI file');\n\t          }\n\t        }\n\t      };\n\t      fetch.send();\n\t    }\n\t  };\n\t\n\t  player.getFileInstruments = function () {\n\t    var instruments = {};\n\t    var programs = {};\n\t    for (var n = 0; n < player.data.length; n++) {\n\t      var event = player.data[n][0].event;\n\t      if (event.type !== 'channel') {\n\t        continue;\n\t      }\n\t      var channel = event.channel;\n\t      switch (event.subtype) {\n\t        case 'controller':\n\t          //        console.log(event.channel, root.defineControl[event.controllerType], event.value)\n\t          break;\n\t        case 'programChange':\n\t          programs[channel] = event.programNumber;\n\t          break;\n\t        case 'noteOn':\n\t          var program = programs[channel];\n\t          var gm = _root2.default.GM.byId[isFinite(program) ? program : channel];\n\t          instruments[gm.id] = true;\n\t          break;\n\t      }\n\t    }\n\t    var ret = [];\n\t    for (var key in instruments) {\n\t      ret.push(key);\n\t    }\n\t    return ret;\n\t  };\n\t\n\t  // Playing the audio\n\t\n\t  var eventQueue = []; // hold events to be triggered\n\t  var queuedTime; //\n\t  var startTime = 0; // to measure time elapse\n\t  var noteRegistrar = {}; // get event for requested note\n\t  var onMidiEvent; // listener\n\t  var scheduleTracking = function scheduleTracking(channel, note, currentTime, offset, message, velocity, time) {\n\t    return setTimeout(function () {\n\t      var data = {\n\t        channel: channel,\n\t        note: note,\n\t        now: currentTime,\n\t        end: player.endTime,\n\t        message: message,\n\t        velocity: velocity\n\t      };\n\t      //\n\t      if (message === 128) {\n\t        delete noteRegistrar[note];\n\t      } else {\n\t        noteRegistrar[note] = data;\n\t      }\n\t      if (onMidiEvent) {\n\t        onMidiEvent(data);\n\t      }\n\t      player.currentTime = currentTime;\n\t      // /\n\t      eventQueue.shift();\n\t      // /\n\t      if (eventQueue.length < 1000) {\n\t        startAudio(queuedTime, true);\n\t      } else if (player.currentTime === queuedTime && queuedTime < player.endTime) {\n\t        // grab next sequence\n\t        startAudio(queuedTime, true);\n\t      }\n\t    }, currentTime - offset);\n\t  };\n\t\n\t  var getContext = function getContext() {\n\t    if (_root2.default.api === 'webaudio') {\n\t      return _root2.default.WebAudio.getContext();\n\t    } else {\n\t      player.ctx = { currentTime: 0 };\n\t    }\n\t    return player.ctx;\n\t  };\n\t\n\t  var getLength = function getLength() {\n\t    var data = player.data;\n\t    var length = data.length;\n\t    var totalTime = 0.5;\n\t    for (var n = 0; n < length; n++) {\n\t      totalTime += data[n][1];\n\t    }\n\t    return totalTime;\n\t  };\n\t\n\t  var __now;\n\t  var getNow = function getNow() {\n\t    if (window.performance && window.performance.now) {\n\t      return window.performance.now();\n\t    } else {\n\t      return Date.now();\n\t    }\n\t  };\n\t\n\t  var startAudio = function startAudio(currentTime, fromCache, onsuccess) {\n\t    if (!player.replayer) {\n\t      return;\n\t    }\n\t    if (!fromCache) {\n\t      if (typeof currentTime === 'undefined') {\n\t        currentTime = player.restart;\n\t      }\n\t      // /\n\t      player.playing && stopAudio();\n\t      player.playing = true;\n\t      player.data = player.replayer.getData();\n\t      player.endTime = getLength();\n\t    }\n\t    // /\n\t    var note;\n\t    var offset = 0;\n\t    var messages = 0;\n\t    var data = player.data;\n\t    var ctx = getContext();\n\t    var length = data.length;\n\t    //\n\t    queuedTime = 0.5;\n\t    // /\n\t    // var interval = eventQueue[0] && eventQueue[0].interval || 0\n\t    var foffset = currentTime - player.currentTime;\n\t    // /\n\t    if (_root2.default.api !== 'webaudio') {\n\t      // set currentTime on ctx\n\t      var now = getNow();\n\t      __now = __now || now;\n\t      ctx.currentTime = (now - __now) / 1000;\n\t    }\n\t    // /\n\t    startTime = ctx.currentTime;\n\t    // /\n\t    for (var n = 0; n < length && messages < 100; n++) {\n\t      var obj = data[n];\n\t      if ((queuedTime += obj[1]) <= currentTime) {\n\t        offset = queuedTime;\n\t        continue;\n\t      }\n\t      // /\n\t      currentTime = queuedTime - offset;\n\t      // /\n\t      var event = obj[0].event;\n\t      if (event.type !== 'channel') {\n\t        continue;\n\t      }\n\t      // /\n\t      var channelId = event.channel;\n\t      var channel = _root2.default.channels[channelId];\n\t      var delay = ctx.currentTime + (currentTime + foffset + player.startDelay) / 1000;\n\t      var queueTime = queuedTime - offset + player.startDelay;\n\t      switch (event.subtype) {\n\t        case 'controller':\n\t          _root2.default.setController(channelId, event.controllerType, event.value, delay);\n\t          break;\n\t        case 'programChange':\n\t          _root2.default.programChange(channelId, event.programNumber, delay);\n\t          break;\n\t        case 'pitchBend':\n\t          _root2.default.pitchBend(channelId, event.value, delay);\n\t          break;\n\t        case 'noteOn':\n\t          if (channel.mute) break;\n\t          note = event.noteNumber - (player.MIDIOffset || 0);\n\t          eventQueue.push({\n\t            event: event,\n\t            time: queueTime,\n\t            source: _root2.default.noteOn(channelId, event.noteNumber, event.velocity, delay),\n\t            interval: scheduleTracking(channelId, note, queuedTime + player.startDelay, offset - foffset, 144, event.velocity)\n\t          });\n\t          messages++;\n\t          break;\n\t        case 'noteOff':\n\t          if (channel.mute) break;\n\t          note = event.noteNumber - (player.MIDIOffset || 0);\n\t          eventQueue.push({\n\t            event: event,\n\t            time: queueTime,\n\t            source: _root2.default.noteOff(channelId, event.noteNumber, delay),\n\t            interval: scheduleTracking(channelId, note, queuedTime, offset - foffset, 128, 0)\n\t          });\n\t          break;\n\t        default:\n\t          break;\n\t      }\n\t    }\n\t    // /\n\t    onsuccess && onsuccess(eventQueue);\n\t  };\n\t\n\t  var stopAudio = function stopAudio() {\n\t    var ctx = getContext();\n\t    player.playing = false;\n\t    player.restart += (ctx.currentTime - startTime) * 1000;\n\t    // stop the audio, and intervals\n\t    while (eventQueue.length) {\n\t      var o = eventQueue.pop();\n\t      window.clearInterval(o.interval);\n\t      if (!o.source) continue; // is not webaudio\n\t      if (typeof o.source === 'number') {\n\t        window.clearTimeout(o.source);\n\t      } else {\n\t        // webaudio\n\t        o.source.disconnect(0);\n\t      }\n\t    }\n\t    // run callback to cancel any notes still playing\n\t    for (var key in noteRegistrar) {\n\t      var _o = noteRegistrar[key];\n\t      if (noteRegistrar[key].message === 144 && onMidiEvent) {\n\t        onMidiEvent({\n\t          channel: _o.channel,\n\t          note: _o.note,\n\t          now: _o.now,\n\t          end: _o.end,\n\t          message: 128,\n\t          velocity: _o.velocity\n\t        });\n\t      }\n\t    }\n\t    // reset noteRegistrar\n\t    noteRegistrar = {};\n\t  };\n\t})();\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _midifile = __webpack_require__(11);\n\t\n\tObject.keys(_midifile).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _midifile[key];\n\t    }\n\t  });\n\t});\n\t\n\tvar _replayer = __webpack_require__(13);\n\t\n\tObject.keys(_replayer).forEach(function (key) {\n\t  if (key === \"default\" || key === \"__esModule\") return;\n\t  Object.defineProperty(exports, key, {\n\t    enumerable: true,\n\t    get: function get() {\n\t      return _replayer[key];\n\t    }\n\t  });\n\t});\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.MidiFile = MidiFile;\n\t\n\tvar _stream = __webpack_require__(12);\n\t\n\tvar _stream2 = _interopRequireDefault(_stream);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction MidiFile(data) {\n\t  var lastEventTypeByte;\n\t\n\t  function readChunk(stream) {\n\t    var id = stream.read(4);\n\t    var length = stream.readInt32();\n\t    return {\n\t      'id': id,\n\t      'length': length,\n\t      'data': stream.read(length)\n\t    };\n\t  }\n\t\n\t  function readEvent(stream) {\n\t    var event = {};\n\t    event.deltaTime = stream.readVarInt();\n\t    var eventTypeByte = stream.readInt8();\n\t    if ((eventTypeByte & 0xf0) === 0xf0) {\n\t      /* system / meta event */\n\t      if (eventTypeByte === 0xff) {\n\t        /* meta event */\n\t        event.type = 'meta';\n\t        var subtypeByte = stream.readInt8();\n\t        var length = stream.readVarInt();\n\t        switch (subtypeByte) {\n\t          case 0x00:\n\t            event.subtype = 'sequenceNumber';\n\t            if (length !== 2) throw new Error('Expected length for sequenceNumber event is 2, got ' + length);\n\t            event.number = stream.readInt16();\n\t            return event;\n\t          case 0x01:\n\t            event.subtype = 'text';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x02:\n\t            event.subtype = 'copyrightNotice';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x03:\n\t            event.subtype = 'trackName';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x04:\n\t            event.subtype = 'instrumentName';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x05:\n\t            event.subtype = 'lyrics';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x06:\n\t            event.subtype = 'marker';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x07:\n\t            event.subtype = 'cuePoint';\n\t            event.text = stream.read(length);\n\t            return event;\n\t          case 0x20:\n\t            event.subtype = 'midiChannelPrefix';\n\t            if (length !== 1) throw new Error('Expected length for midiChannelPrefix event is 1, got ' + length);\n\t            event.channel = stream.readInt8();\n\t            return event;\n\t          case 0x2f:\n\t            event.subtype = 'endOfTrack';\n\t            if (length !== 0) throw new Error('Expected length for endOfTrack event is 0, got ' + length);\n\t            return event;\n\t          case 0x51:\n\t            event.subtype = 'setTempo';\n\t            if (length !== 3) throw new Error('Expected length for setTempo event is 3, got ' + length);\n\t            event.microsecondsPerBeat = (stream.readInt8() << 16) + (stream.readInt8() << 8) + stream.readInt8();\n\t            return event;\n\t          case 0x54:\n\t            event.subtype = 'smpteOffset';\n\t            if (length !== 5) throw new Error('Expected length for smpteOffset event is 5, got ' + length);\n\t            var hourByte = stream.readInt8();\n\t            event.frameRate = {\n\t              0x00: 24, 0x20: 25, 0x40: 29, 0x60: 30\n\t            }[hourByte & 0x60];\n\t            event.hour = hourByte & 0x1f;\n\t            event.min = stream.readInt8();\n\t            event.sec = stream.readInt8();\n\t            event.frame = stream.readInt8();\n\t            event.subframe = stream.readInt8();\n\t            return event;\n\t          case 0x58:\n\t            event.subtype = 'timeSignature';\n\t            if (length !== 4) throw new Error('Expected length for timeSignature event is 4, got ' + length);\n\t            event.numerator = stream.readInt8();\n\t            event.denominator = Math.pow(2, stream.readInt8());\n\t            event.metronome = stream.readInt8();\n\t            event.thirtyseconds = stream.readInt8();\n\t            return event;\n\t          case 0x59:\n\t            event.subtype = 'keySignature';\n\t            if (length !== 2) throw new Error('Expected length for keySignature event is 2, got ' + length);\n\t            event.key = stream.readInt8(true);\n\t            event.scale = stream.readInt8();\n\t            return event;\n\t          case 0x7f:\n\t            event.subtype = 'sequencerSpecific';\n\t            event.data = stream.read(length);\n\t            return event;\n\t          default:\n\t            // console.log(\"Unrecognised meta event subtype: \" + subtypeByte)\n\t            event.subtype = 'unknown';\n\t            event.data = stream.read(length);\n\t            return event;\n\t        }\n\t        // event.data = stream.read(length)\n\t        // return event\n\t      } else if (eventTypeByte === 0xf0) {\n\t        event.type = 'sysEx';\n\t        var _length = stream.readVarInt();\n\t        event.data = stream.read(_length);\n\t        return event;\n\t      } else if (eventTypeByte === 0xf7) {\n\t        event.type = 'dividedSysEx';\n\t        var _length2 = stream.readVarInt();\n\t        event.data = stream.read(_length2);\n\t        return event;\n\t      } else {\n\t        throw new Error('Unrecognised MIDI event type byte: ' + eventTypeByte);\n\t      }\n\t    } else {\n\t      /* channel event */\n\t      var param1;\n\t      if ((eventTypeByte & 0x80) === 0) {\n\t        /* running status - reuse lastEventTypeByte as the event type.\n\t          eventTypeByte is actually the first parameter\n\t        */\n\t        param1 = eventTypeByte;\n\t        eventTypeByte = lastEventTypeByte;\n\t      } else {\n\t        param1 = stream.readInt8();\n\t        lastEventTypeByte = eventTypeByte;\n\t      }\n\t      var eventType = eventTypeByte >> 4;\n\t      event.channel = eventTypeByte & 0x0f;\n\t      event.type = 'channel';\n\t      switch (eventType) {\n\t        case 0x08:\n\t          event.subtype = 'noteOff';\n\t          event.noteNumber = param1;\n\t          event.velocity = stream.readInt8();\n\t          return event;\n\t        case 0x09:\n\t          event.noteNumber = param1;\n\t          event.velocity = stream.readInt8();\n\t          if (event.velocity === 0) {\n\t            event.subtype = 'noteOff';\n\t          } else {\n\t            event.subtype = 'noteOn';\n\t          }\n\t          return event;\n\t        case 0x0a:\n\t          event.subtype = 'noteAftertouch';\n\t          event.noteNumber = param1;\n\t          event.amount = stream.readInt8();\n\t          return event;\n\t        case 0x0b:\n\t          event.subtype = 'controller';\n\t          event.controllerType = param1;\n\t          event.value = stream.readInt8();\n\t          return event;\n\t        case 0x0c:\n\t          event.subtype = 'programChange';\n\t          event.programNumber = param1;\n\t          return event;\n\t        case 0x0d:\n\t          event.subtype = 'channelAftertouch';\n\t          event.amount = param1;\n\t          return event;\n\t        case 0x0e:\n\t          event.subtype = 'pitchBend';\n\t          event.value = param1 + (stream.readInt8() << 7);\n\t          return event;\n\t        default:\n\t          throw new Error('Unrecognised MIDI event type: ' + eventType);\n\t        /*\n\t        console.log(\"Unrecognised MIDI event type: \" + eventType)\n\t        stream.readInt8()\n\t        event.subtype = 'unknown'\n\t        return event\n\t        */\n\t      }\n\t    }\n\t  }\n\t\n\t  var stream = (0, _stream2.default)(data);\n\t  var headerChunk = readChunk(stream);\n\t  if (headerChunk.id !== 'MThd' || headerChunk.length !== 6) {\n\t    throw new Error('Bad .mid file - header not found');\n\t  }\n\t  var headerStream = (0, _stream2.default)(headerChunk.data);\n\t  var formatType = headerStream.readInt16();\n\t  var trackCount = headerStream.readInt16();\n\t  var timeDivision = headerStream.readInt16();\n\t  var ticksPerBeat;\n\t\n\t  if (timeDivision & 0x8000) {\n\t    throw new Error('Expressing time division in SMTPE frames is not supported yet');\n\t  } else {\n\t    ticksPerBeat = timeDivision;\n\t  }\n\t\n\t  var header = {\n\t    'formatType': formatType,\n\t    'trackCount': trackCount,\n\t    'ticksPerBeat': ticksPerBeat\n\t  };\n\t  var tracks = [];\n\t  for (var i = 0; i < header.trackCount; i++) {\n\t    tracks[i] = [];\n\t    var trackChunk = readChunk(stream);\n\t    if (trackChunk.id !== 'MTrk') {\n\t      throw new Error('Unexpected chunk - expected MTrk, got ' + trackChunk.id);\n\t    }\n\t    var trackStream = (0, _stream2.default)(trackChunk.data);\n\t    while (!trackStream.eof()) {\n\t      var event = readEvent(trackStream);\n\t      tracks[i].push(event);\n\t      // console.log(event)\n\t    }\n\t  }\n\t\n\t  return {\n\t    'header': header,\n\t    'tracks': tracks\n\t  };\n\t} /**\n\t   * class to parse the .mid file format\n\t   * (depends on _stream.js)\n\t   */\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (str) {\n\t  var position = 0;\n\t\n\t  function read(length) {\n\t    var result = str.substr(position, length);\n\t    position += length;\n\t    return result;\n\t  }\n\t\n\t  /* read a big-endian 32-bit integer */\n\t  function readInt32() {\n\t    var result = (str.charCodeAt(position) << 24) + (str.charCodeAt(position + 1) << 16) + (str.charCodeAt(position + 2) << 8) + str.charCodeAt(position + 3);\n\t    position += 4;\n\t    return result;\n\t  }\n\t\n\t  /* read a big-endian 16-bit integer */\n\t  function readInt16() {\n\t    var result = (str.charCodeAt(position) << 8) + str.charCodeAt(position + 1);\n\t    position += 2;\n\t    return result;\n\t  }\n\t\n\t  /* read an 8-bit integer */\n\t  function readInt8(signed) {\n\t    var result = str.charCodeAt(position);\n\t    if (signed && result > 127) result -= 256;\n\t    position += 1;\n\t    return result;\n\t  }\n\t\n\t  function eof() {\n\t    return position >= str.length;\n\t  }\n\t\n\t  /* read a MIDI-style variable-length integer\n\t    (big-endian value in groups of 7 bits,\n\t    with top bit set to signify that another byte follows)\n\t  */\n\t  function readVarInt() {\n\t    var result = 0;\n\t    while (true) {\n\t      var b = readInt8();\n\t      if (b & 0x80) {\n\t        result += b & 0x7f;\n\t        result <<= 7;\n\t      } else {\n\t        /* b is the last byte */\n\t        return result + b;\n\t      }\n\t    }\n\t  }\n\t\n\t  return {\n\t    'eof': eof,\n\t    'read': read,\n\t    'readInt32': readInt32,\n\t    'readInt16': readInt16,\n\t    'readInt8': readInt8,\n\t    'readVarInt': readVarInt\n\t  };\n\t};\n\t\n\tmodule.exports = exports['default']; /* Wrapper for accessing strings through sequential reads */\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.Replayer = Replayer;\n\tvar clone = function clone(o) {\n\t  if ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) !== 'object') return o;\n\t  if (o === null) return o;\n\t  var ret = typeof o.length === 'number' ? [] : {};\n\t  for (var key in o) {\n\t    ret[key] = clone(o[key]);\n\t  }return ret;\n\t};\n\t\n\tfunction Replayer(midiFile, timeWarp, eventProcessor, bpm) {\n\t  var trackStates = [];\n\t  var beatsPerMinute = bpm || 120;\n\t  var bpmOverride = !!bpm;\n\t  var ticksPerBeat = midiFile.header.ticksPerBeat;\n\t\n\t  for (var i = 0; i < midiFile.tracks.length; i++) {\n\t    trackStates[i] = {\n\t      'nextEventIndex': 0,\n\t      'ticksToNextEvent': midiFile.tracks[i].length ? midiFile.tracks[i][0].deltaTime : null\n\t    };\n\t  }\n\t\n\t  function getNextEvent() {\n\t    var ticksToNextEvent = null;\n\t    var nextEventTrack = null;\n\t    var nextEventIndex = null;\n\t\n\t    for (var _i = 0; _i < trackStates.length; _i++) {\n\t      if (trackStates[_i].ticksToNextEvent != null && (ticksToNextEvent == null || trackStates[_i].ticksToNextEvent < ticksToNextEvent)) {\n\t        ticksToNextEvent = trackStates[_i].ticksToNextEvent;\n\t        nextEventTrack = _i;\n\t        nextEventIndex = trackStates[_i].nextEventIndex;\n\t      }\n\t    }\n\t    if (nextEventTrack != null) {\n\t      /* consume event from that track */\n\t      var nextEvent = midiFile.tracks[nextEventTrack][nextEventIndex];\n\t      if (midiFile.tracks[nextEventTrack][nextEventIndex + 1]) {\n\t        trackStates[nextEventTrack].ticksToNextEvent += midiFile.tracks[nextEventTrack][nextEventIndex + 1].deltaTime;\n\t      } else {\n\t        trackStates[nextEventTrack].ticksToNextEvent = null;\n\t      }\n\t      trackStates[nextEventTrack].nextEventIndex += 1;\n\t      /* advance timings on all tracks by ticksToNextEvent */\n\t      for (var _i2 = 0; _i2 < trackStates.length; _i2++) {\n\t        if (trackStates[_i2].ticksToNextEvent != null) {\n\t          trackStates[_i2].ticksToNextEvent -= ticksToNextEvent;\n\t        }\n\t      }\n\t      return {\n\t        'ticksToEvent': ticksToNextEvent,\n\t        'event': nextEvent,\n\t        'track': nextEventTrack\n\t      };\n\t    } else {\n\t      return null;\n\t    }\n\t  }\n\t  //\n\t  var midiEvent;\n\t  var temporal = [];\n\t  ~function processEvents() {\n\t    function processNext() {\n\t      if (!bpmOverride && midiEvent.event.type === 'meta' && midiEvent.event.subtype === 'setTempo') {\n\t        // tempo change events can occur anywhere in the middle and affect events that follow\n\t        beatsPerMinute = 60000000 / midiEvent.event.microsecondsPerBeat;\n\t      }\n\t      // /\n\t      var beatsToGenerate = 0;\n\t      var secondsToGenerate = 0;\n\t      if (midiEvent.ticksToEvent > 0) {\n\t        beatsToGenerate = midiEvent.ticksToEvent / ticksPerBeat;\n\t        secondsToGenerate = beatsToGenerate / (beatsPerMinute / 60);\n\t      }\n\t      // /\n\t      var time = secondsToGenerate * 1000 * timeWarp || 0;\n\t      temporal.push([midiEvent, time]);\n\t      midiEvent = getNextEvent();\n\t    }\n\t    // /\n\t    midiEvent = getNextEvent();\n\t    if (midiEvent) {\n\t      while (midiEvent) {\n\t        processNext(true);\n\t      }\n\t    }\n\t  }();\n\t\n\t  return {\n\t    getData: function getData() {\n\t      return clone(temporal);\n\t    }\n\t  };\n\t}\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(15);\n\t\n\t__webpack_require__(16);\n\t\n\t__webpack_require__(17);\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\twindow.Audio && function () {\n\t  var midi = _root2.default.AudioTag = { api: 'audiotag' };\n\t  var noteToKey = {};\n\t  var volume = 127; // floating point\n\t  var bufferNid = -1; // current channel\n\t  var audioBuffers = []; // the audio channels\n\t  var notesOn = []; // instrumentId + noteId that is currently playing in each 'channel', for routing noteOff/chordOff calls\n\t  var notes = {}; // the piano keys\n\t  for (var nid = 0; nid < 12; nid++) {\n\t    audioBuffers[nid] = new window.Audio();\n\t  }\n\t\n\t  var playChannel = function playChannel(channel, note) {\n\t    if (!_root2.default.channels[channel]) return;\n\t    var instrument = _root2.default.channels[channel].instrument;\n\t    var instrumentId = _root2.default.GM.byId[instrument].id;\n\t    note = notes[note];\n\t    if (note) {\n\t      var instrumentNoteId = instrumentId + '' + note.id;\n\t      var nid = (bufferNid + 1) % audioBuffers.length;\n\t      var audio = audioBuffers[nid];\n\t      notesOn[nid] = instrumentNoteId;\n\t      if (!_root2.default.Soundfont[instrumentId]) {\n\t        if (_root2.default.DEBUG) {\n\t          console.log('404', instrumentId);\n\t        }\n\t        return;\n\t      }\n\t      audio.src = _root2.default.Soundfont[instrumentId][note.id];\n\t      audio.volume = volume / 127;\n\t      audio.play();\n\t      bufferNid = nid;\n\t    }\n\t  };\n\t\n\t  var stopChannel = function stopChannel(channel, note) {\n\t    if (!_root2.default.channels[channel]) return;\n\t    var instrument = _root2.default.channels[channel].instrument;\n\t    var instrumentId = _root2.default.GM.byId[instrument].id;\n\t    note = notes[note];\n\t    if (note) {\n\t      var instrumentNoteId = instrumentId + '' + note.id;\n\t      for (var i = 0, len = audioBuffers.length; i < len; i++) {\n\t        var nid = (i + bufferNid + 1) % len;\n\t        var cId = notesOn[nid];\n\t        if (cId && cId === instrumentNoteId) {\n\t          audioBuffers[nid].pause();\n\t          notesOn[nid] = null;\n\t          return;\n\t        }\n\t      }\n\t    }\n\t  };\n\t\n\t  midi.audioBuffers = audioBuffers;\n\t  midi.send = function (data, delay) {};\n\t  midi.setController = function (channel, type, value, delay) {};\n\t  midi.setVolume = function (channel, n) {\n\t    volume = n; // - should be channel specific volume\n\t  };\n\t\n\t  midi.programChange = function (channel, program) {\n\t    _root2.default.channels[channel].instrument = program;\n\t  };\n\t\n\t  midi.pitchBend = function (channel, program, delay) {};\n\t\n\t  midi.noteOn = function (channel, note, velocity, delay) {\n\t    var id = noteToKey[note];\n\t    if (!notes[id]) return;\n\t    if (delay) {\n\t      return setTimeout(function () {\n\t        playChannel(channel, id);\n\t      }, delay * 1000);\n\t    } else {\n\t      playChannel(channel, id);\n\t    }\n\t  };\n\t\n\t  midi.noteOff = function (channel, note, delay) {\n\t    //      var id = noteToKey[note]\n\t    //      if (!notes[id]) return\n\t    //      if (delay) {\n\t    //        return setTimeout(function() {\n\t    //          stopChannel(channel, id)\n\t    //        }, delay * 1000)\n\t    //      } else {\n\t    //        stopChannel(channel, id)\n\t    //      }\n\t  };\n\t\n\t  midi.chordOn = function (channel, chord, velocity, delay) {\n\t    for (var idx = 0; idx < chord.length; idx++) {\n\t      var n = chord[idx];\n\t      var id = noteToKey[n];\n\t      if (!notes[id]) continue;\n\t      if (delay) {\n\t        return setTimeout(function () {\n\t          playChannel(channel, id);\n\t        }, delay * 1000);\n\t      } else {\n\t        playChannel(channel, id);\n\t      }\n\t    }\n\t  };\n\t\n\t  midi.chordOff = function (channel, chord, delay) {\n\t    for (var idx = 0; idx < chord.length; idx++) {\n\t      var n = chord[idx];\n\t      var id = noteToKey[n];\n\t      if (!notes[id]) continue;\n\t      if (delay) {\n\t        return setTimeout(function () {\n\t          stopChannel(channel, id);\n\t        }, delay * 1000);\n\t      } else {\n\t        stopChannel(channel, id);\n\t      }\n\t    }\n\t  };\n\t\n\t  midi.stopAllNotes = function () {\n\t    for (var nid = 0, length = audioBuffers.length; nid < length; nid++) {\n\t      audioBuffers[nid].pause();\n\t    }\n\t  };\n\t\n\t  midi.connect = function (opts) {\n\t    _root2.default.setDefaultPlugin(midi);\n\t    // /\n\t    for (var key in _root2.default.keyToNote) {\n\t      noteToKey[_root2.default.keyToNote[key]] = key;\n\t      notes[key] = { id: key };\n\t    }\n\t    // /\n\t    opts.onsuccess && opts.onsuccess();\n\t  };\n\t}(); /*\n\t       ----------------------------------------------------------------------\n\t       AudioTag <audio> - OGG or MPEG Soundbank\n\t       ----------------------------------------------------------------------\n\t       http://dev.w3.org/html5/spec/Overview.html#the-audio-element\n\t       ----------------------------------------------------------------------\n\t     */\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// REF: http://stackoverflow.com/questions/21797299/convert-base64-string-to-arraybuffer\n\tfunction base64ToArrayBuffer(base64) {\n\t  var binaryString = window.atob(base64);\n\t  var len = binaryString.length;\n\t  var bytes = new Uint8Array(len);\n\t  for (var i = 0; i < len; i++) {\n\t    bytes[i] = binaryString.charCodeAt(i);\n\t  }\n\t  return bytes.buffer;\n\t} /*\n\t    ----------------------------------------------------------\n\t    Web Audio API - OGG or MPEG Soundbank\n\t    ----------------------------------------------------------\n\t    http://webaudio.github.io/web-audio-api/\n\t    ----------------------------------------------------------\n\t  */\n\t\n\t\n\twindow.AudioContext && function () {\n\t  // var audioContext = null // new AudioContext()\n\t  var useStreamingBuffer = false; // !!audioContext.createMediaElementSource\n\t  var midi = _root2.default.WebAudio = { api: 'webaudio' };\n\t  var ctx; // audio context\n\t  var sources = {};\n\t  var effects = {};\n\t  var masterVolume = 127;\n\t  var audioBuffers = {};\n\t  // /\n\t  midi.audioBuffers = audioBuffers;\n\t  midi.send = function (data, delay) {};\n\t  midi.setController = function (channelId, type, value, delay) {};\n\t\n\t  midi.setVolume = function (channelId, volume, delay) {\n\t    if (delay) {\n\t      setTimeout(function () {\n\t        masterVolume = volume;\n\t      }, delay * 1000);\n\t    } else {\n\t      masterVolume = volume;\n\t    }\n\t  };\n\t\n\t  midi.programChange = function (channelId, program, delay) {\n\t    //      if (delay) {\n\t    //        return setTimeout(function() {\n\t    //          var channel = root.channels[channelId]\n\t    //          channel.instrument = program\n\t    //        }, delay)\n\t    //      } else {\n\t    var channel = _root2.default.channels[channelId];\n\t    channel.instrument = program;\n\t    //      }\n\t  };\n\t\n\t  midi.pitchBend = function (channelId, program, delay) {\n\t    //      if (delay) {\n\t    //        setTimeout(function() {\n\t    //          var channel = root.channels[channelId]\n\t    //          channel.pitchBend = program\n\t    //        }, delay)\n\t    //      } else {\n\t    var channel = _root2.default.channels[channelId];\n\t    channel.pitchBend = program;\n\t    //      }\n\t  };\n\t\n\t  midi.noteOn = function (channelId, noteId, velocity, delay) {\n\t    delay = delay || 0;\n\t\n\t    // / check whether the note exists\n\t    var channel = _root2.default.channels[channelId];\n\t    var instrument = channel.instrument;\n\t    var bufferId = instrument + '' + noteId;\n\t    var buffer = audioBuffers[bufferId];\n\t    if (!buffer) {\n\t      //        console.log(midi.GM.byId[instrument].id, instrument, channelId)\n\t      return;\n\t    }\n\t\n\t    // / convert relative delay to absolute delay\n\t    if (delay < ctx.currentTime) {\n\t      delay += ctx.currentTime;\n\t    }\n\t\n\t    // / create audio buffer\n\t    var source;\n\t    if (useStreamingBuffer) {\n\t      source = ctx.createMediaElementSource(buffer);\n\t    } else {\n\t      // XMLHTTP buffer\n\t      source = ctx.createBufferSource();\n\t      source.buffer = buffer;\n\t    }\n\t\n\t    // / add effects to buffer\n\t    if (effects) {\n\t      var chain = source;\n\t      for (var key in effects) {\n\t        chain.connect(effects[key].input);\n\t        chain = effects[key];\n\t      }\n\t    }\n\t\n\t    // / add gain + pitchShift\n\t    var gain = velocity / 127 * (masterVolume / 127) * 2 - 1;\n\t    source.connect(ctx.destination);\n\t    source.playbackRate.value = 1; // pitch shift\n\t    source.gainNode = ctx.createGain(); // gain\n\t    source.gainNode.connect(ctx.destination);\n\t    source.gainNode.gain.value = Math.min(1.0, Math.max(-1.0, gain));\n\t    source.connect(source.gainNode);\n\t    // /\n\t    if (useStreamingBuffer) {\n\t      if (delay) {\n\t        return setTimeout(function () {\n\t          buffer.currentTime = 0;\n\t          buffer.play();\n\t        }, delay * 1000);\n\t      } else {\n\t        buffer.currentTime = 0;\n\t        buffer.play();\n\t      }\n\t    } else {\n\t      source.start(delay || 0);\n\t    }\n\t    // /\n\t    sources[channelId + '' + noteId] = source;\n\t    // /\n\t    return source;\n\t  };\n\t\n\t  midi.noteOff = function (channelId, noteId, delay) {\n\t    delay = delay || 0;\n\t\n\t    // / check whether the note exists\n\t    var channel = _root2.default.channels[channelId];\n\t    var instrument = channel.instrument;\n\t    var bufferId = instrument + '' + noteId;\n\t    var buffer = audioBuffers[bufferId];\n\t    if (buffer) {\n\t      if (delay < ctx.currentTime) {\n\t        delay += ctx.currentTime;\n\t      }\n\t      // /\n\t      var source = sources[channelId + '' + noteId];\n\t      if (source) {\n\t        if (source.gainNode) {\n\t          // @Miranet: 'the values of 0.2 and 0.3 could of course be used as\n\t          // a 'release' parameter for ADSR like time settings.'\n\t          // add { 'metadata': { release: 0.3 } } to soundfont files\n\t          var gain = source.gainNode.gain;\n\t          gain.linearRampToValueAtTime(gain.value, delay);\n\t          gain.linearRampToValueAtTime(-1.0, delay + 0.3);\n\t        }\n\t        // /\n\t        if (useStreamingBuffer) {\n\t          if (delay) {\n\t            setTimeout(function () {\n\t              buffer.pause();\n\t            }, delay * 1000);\n\t          } else {\n\t            buffer.pause();\n\t          }\n\t        } else {\n\t          if (source.noteOff) {\n\t            source.noteOff(delay + 0.5);\n\t          } else {\n\t            source.stop(delay + 0.5);\n\t          }\n\t        }\n\t        // /\n\t        delete sources[channelId + '' + noteId];\n\t        // /\n\t        return source;\n\t      }\n\t    }\n\t  };\n\t\n\t  midi.chordOn = function (channel, chord, velocity, delay) {\n\t    var res = {};\n\t    for (var n = 0, note, len = chord.length; n < len; n++) {\n\t      res[note = chord[n]] = midi.noteOn(channel, note, velocity, delay);\n\t    }\n\t    return res;\n\t  };\n\t\n\t  midi.chordOff = function (channel, chord, delay) {\n\t    var res = {};\n\t    for (var n = 0, note, len = chord.length; n < len; n++) {\n\t      res[note = chord[n]] = midi.noteOff(channel, note, delay);\n\t    }\n\t    return res;\n\t  };\n\t\n\t  midi.stopAllNotes = function () {\n\t    for (var sid in sources) {\n\t      var delay = 0;\n\t      if (delay < ctx.currentTime) {\n\t        delay += ctx.currentTime;\n\t      }\n\t      var source = sources[sid];\n\t      source.gain.linearRampToValueAtTime(1, delay);\n\t      source.gain.linearRampToValueAtTime(0, delay + 0.3);\n\t      if (source.noteOff) {\n\t        // old api\n\t        source.noteOff(delay + 0.3);\n\t      } else {\n\t        // new api\n\t        source.stop(delay + 0.3);\n\t      }\n\t      delete sources[sid];\n\t    }\n\t  };\n\t\n\t  midi.setEffects = function (list) {\n\t    if (ctx.tunajs) {\n\t      for (var n = 0; n < list.length; n++) {\n\t        var data = list[n];\n\t        var effect = new ctx.tunajs[data.type](data);\n\t        effect.connect(ctx.destination);\n\t        effects[data.type] = effect;\n\t      }\n\t    } else {\n\t      return console.log('Effects module not installed.');\n\t    }\n\t  };\n\t\n\t  midi.connect = function (opts) {\n\t    _root2.default.setDefaultPlugin(midi);\n\t    midi.setContext(ctx || createAudioContext(), opts.onsuccess);\n\t  };\n\t\n\t  midi.getContext = function () {\n\t    return ctx;\n\t  };\n\t\n\t  midi.setContext = function (newCtx, onload, onprogress, onerror) {\n\t    ctx = newCtx;\n\t\n\t    // / tuna.js effects module - https://github.com/Dinahmoe/tuna\n\t    if (typeof window.Tuna !== 'undefined' && !ctx.tunajs) {\n\t      ctx.tunajs = new window.Tuna(ctx);\n\t    }\n\t\n\t    // / loading audio files\n\t    var urls = [];\n\t    var notes = _root2.default.keyToNote;\n\t    for (var key in notes) {\n\t      urls.push(key);\n\t    } // /\n\t    var waitForEnd = function waitForEnd(instrument) {\n\t      for (var _key in bufferPending) {\n\t        // has pending items\n\t        if (bufferPending[_key]) return;\n\t      }\n\t      // /\n\t      if (onload) {\n\t        // run onload once\n\t        onload();\n\t        onload = null;\n\t      }\n\t    };\n\t    // /\n\t    var requestAudio = function requestAudio(soundfont, instrumentId, index, key) {\n\t      var url = soundfont[key];\n\t      if (url) {\n\t        bufferPending[instrumentId]++;\n\t        loadAudio(url, function (buffer) {\n\t          buffer.id = key;\n\t          var noteId = _root2.default.keyToNote[key];\n\t          audioBuffers[instrumentId + '' + noteId] = buffer;\n\t          // /\n\t          if (--bufferPending[instrumentId] === 0) {\n\t            // var percent = index / 87\n\t            //              console.log(midi.GM.byId[instrumentId], 'processing: ', percent)\n\t            soundfont.isLoaded = true;\n\t            waitForEnd(instrument);\n\t          }\n\t        }, function (err) {\n\t          console.error(err);\n\t        });\n\t      }\n\t    };\n\t    // /\n\t    var bufferPending = {};\n\t    for (var instrument in _root2.default.Soundfont) {\n\t      var soundfont = _root2.default.Soundfont[instrument];\n\t      if (soundfont.isLoaded) {\n\t        continue;\n\t      }\n\t      // /\n\t      var synth = _root2.default.GM.byName[instrument];\n\t      var instrumentId = synth.number;\n\t      // /\n\t      bufferPending[instrumentId] = 0;\n\t      // /\n\t      for (var index = 0; index < urls.length; index++) {\n\t        var _key2 = urls[index];\n\t        requestAudio(soundfont, instrumentId, index, _key2);\n\t      }\n\t    }\n\t    // /\n\t    setTimeout(waitForEnd, 1);\n\t  };\n\t\n\t  /* Load audio file: streaming | base64 | arraybuffer\n\t  ---------------------------------------------------------------------- */\n\t  function loadAudio(url, onload, onerror) {\n\t    if (useStreamingBuffer) {\n\t      var audio = new window.Audio();\n\t      audio.src = url;\n\t      audio.controls = false;\n\t      audio.autoplay = false;\n\t      audio.preload = false;\n\t      audio.addEventListener('canplay', function () {\n\t        onload && onload(audio);\n\t      });\n\t      audio.addEventListener('error', function (err) {\n\t        onerror && onerror(err);\n\t      });\n\t      document.body.appendChild(audio);\n\t    } else if (url.indexOf('data:audio') === 0) {\n\t      // Base64 string\n\t      var base64 = url.split(',')[1];\n\t      var buffer = base64ToArrayBuffer(base64);\n\t      ctx.decodeAudioData(buffer, onload, onerror);\n\t    } else {\n\t      // XMLHTTP buffer\n\t      var request = new window.XMLHttpRequest();\n\t      request.open('GET', url, true);\n\t      request.responseType = 'arraybuffer';\n\t      request.onload = function () {\n\t        ctx.decodeAudioData(request.response, onload, onerror);\n\t      };\n\t      request.send();\n\t    }\n\t  }\n\t\n\t  function createAudioContext() {\n\t    return new (window.AudioContext || window.webkitAudioContext)();\n\t  }\n\t}();\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _root = __webpack_require__(2);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t(function () {\n\t  var plugin = null;\n\t  var output = null;\n\t  var midi = _root2.default.WebMIDI = { api: 'webmidi' };\n\t  midi.send = function (data, delay) {\n\t    // set channel volume\n\t    output.send(data, delay * 1000);\n\t  };\n\t\n\t  midi.setController = function (channel, type, value, delay) {\n\t    output.send([channel, type, value], delay * 1000);\n\t  };\n\t\n\t  midi.setVolume = function (channel, volume, delay) {\n\t    // set channel volume\n\t    output.send([0xB0 + channel, 0x07, volume], delay * 1000);\n\t  };\n\t\n\t  midi.programChange = function (channel, program, delay) {\n\t    // change patch (instrument)\n\t    output.send([0xC0 + channel, program], delay * 1000);\n\t  };\n\t\n\t  midi.pitchBend = function (channel, program, delay) {\n\t    // pitch bend\n\t    output.send([0xE0 + channel, program], delay * 1000);\n\t  };\n\t\n\t  midi.noteOn = function (channel, note, velocity, delay) {\n\t    output.send([0x90 + channel, note, velocity], delay * 1000);\n\t  };\n\t\n\t  midi.noteOff = function (channel, note, delay) {\n\t    output.send([0x80 + channel, note, 0], delay * 1000);\n\t  };\n\t\n\t  midi.chordOn = function (channel, chord, velocity, delay) {\n\t    for (var n = 0; n < chord.length; n++) {\n\t      var note = chord[n];\n\t      output.send([0x90 + channel, note, velocity], delay * 1000);\n\t    }\n\t  };\n\t\n\t  midi.chordOff = function (channel, chord, delay) {\n\t    for (var n = 0; n < chord.length; n++) {\n\t      var note = chord[n];\n\t      output.send([0x80 + channel, note, 0], delay * 1000);\n\t    }\n\t  };\n\t\n\t  midi.stopAllNotes = function () {\n\t    output.cancel();\n\t    for (var channel = 0; channel < 16; channel++) {\n\t      output.send([0xB0 + channel, 0x7B, 0]);\n\t    }\n\t  };\n\t\n\t  midi.connect = function (opts) {\n\t    _root2.default.setDefaultPlugin(midi);\n\t    var errFunction = function errFunction(err) {\n\t      // well at least we tried!\n\t      if (window.AudioContext) {\n\t        // Chrome\n\t        opts.api = 'webaudio';\n\t      } else if (window.Audio) {\n\t        // Firefox\n\t        opts.api = 'audiotag';\n\t      } else {\n\t        // no support\n\t        return err;\n\t      }\n\t      _root2.default.loadPlugin(opts);\n\t    };\n\t    // /\n\t    navigator.requestMIDIAccess().then(function (access) {\n\t      plugin = access;\n\t      var pluginOutputs = plugin.outputs;\n\t      if (typeof pluginOutputs === 'function') {\n\t        // Chrome pre-43\n\t        output = pluginOutputs()[0];\n\t      } else {\n\t        // Chrome post-43\n\t        output = pluginOutputs[0];\n\t      }\n\t      if (output === undefined) {\n\t        // nothing there...\n\t        errFunction();\n\t      } else {\n\t        opts.onsuccess && opts.onsuccess();\n\t      }\n\t    }, errFunction);\n\t  };\n\t})(); /*\n\t        ----------------------------------------------------------------------\n\t        Web MIDI API - Native Soundbanks\n\t        ----------------------------------------------------------------------\n\t        http://webaudio.github.io/web-midi-api/\n\t        ----------------------------------------------------------------------\n\t      */\n\n/***/ }\n/******/ ])\n});\n;\n//# sourceMappingURL=midi.js.map","<script lang=\"ts\">\n    export let octaves = 2;\n    export let middleC = 60;\n    export let keysPressed = [];\n    export let verbose;\n\n    import Key from \"./Key.svelte\";\n    import { onMount } from \"svelte\";\n    import MIDI from \"midi.js\";\n    import { Chord, getNthNoteInKey, Inversion, notesInChord } from \"./chords\";\n\n    let notes;\n\n    let start = 60;\n\n    $: notes = [...Array(octaves * 12 + 1).keys()].map(\n        (i) => i + (middleC - Math.floor(octaves / 2) * 12),\n    );\n\n    let logs = [];\n\n    const sleep = (ms: number) => new Promise((r) => setTimeout(r, ms));\n\n    function midiToKey(note: number) {\n        let octave = Math.floor(note / (12 * octaves));\n        let offset = note % (12 * octaves);\n        if (octave % (octaves + 1) == 0 && offset == 0) {\n            // need this because we add in 1 extra note of the one we start on\n            return 12 * octaves;\n        } else {\n            return offset;\n        }\n    }\n\n    function noteOn(note: number, velocity: number = 127) {\n        logs = [`Note ${note} was pressed!`, ...logs];\n        MIDI.noteOn(0, note, velocity, 0);\n        let key = midiToKey(note);\n        keyBindings[key]?.playKey();\n    }\n\n    function noteOff(note: number) {\n        logs = [`Note ${note} was released!`, ...logs];\n        MIDI.noteOff(0, note, 0);\n        let key = midiToKey(note);\n        keyBindings[key]?.stopPlayingKey();\n    }\n\n    function listInputsAndOutputs(midiAccess: WebMidi.MIDIAccess) {\n        for (const entry of midiAccess.inputs) {\n            const input = entry[1];\n            console.log(\n                \"Input port [type:'\" +\n                    input.type +\n                    \"'] id:'\" +\n                    input.id +\n                    \"' manufacturer:'\" +\n                    input.manufacturer +\n                    \"' name:'\" +\n                    input.name +\n                    \"' version:'\" +\n                    input.version +\n                    \"'\",\n            );\n        }\n\n        for (const entry of midiAccess.outputs) {\n            const output = entry[1];\n            console.log(\n                \"Output port [type:'\" +\n                    output.type +\n                    \"'] id:'\" +\n                    output.id +\n                    \"' manufacturer:'\" +\n                    output.manufacturer +\n                    \"' name:'\" +\n                    output.name +\n                    \"' version:'\" +\n                    output.version +\n                    \"'\",\n            );\n        }\n    }\n\n    function onMIDIMessage(event: WebMidi.MIDIMessageEvent) {\n        if (verbose) {\n            let str =\n                \"MIDI message received at timestamp \" +\n                event.timeStamp +\n                \"[\" +\n                event.data.length +\n                \" bytes]: \";\n            for (let i = 0; i < event.data.length; i++) {\n                str += \"0x\" + event.data[i].toString(16) + \" \";\n                event.data;\n            }\n            console.log(str);\n        }\n\n        const command = event.data[0];\n        const note = keyBindings[midiToKey(event.data[1])]?.getNote();\n        const velocity = event.data.length > 2 ? event.data[2] : 0; // a velocity value might not be included with a noteOff command\n\n        switch (command) {\n            case 144: // noteOn\n                if (velocity > 0) {\n                    noteOn(note);\n                } else {\n                    noteOff(note);\n                }\n                break;\n            case 128: // noteOff\n                noteOff(note);\n                break;\n            // we could easily expand this switch statement to cover other types of commands such as controllers or sysex\n        }\n    }\n\n    onMount(async () => {\n        MIDI.loadPlugin({\n            soundfontUrl: \"./soundfont/\",\n            instrument: \"acoustic_grand_piano\",\n            onprogress: function (state, progress) {\n                console.log(state, progress);\n            },\n            onsuccess: function () {\n                MIDI.setVolume(0, 127);\n            },\n        });\n        try {\n            let midiAccess = await navigator.requestMIDIAccess();\n            console.log(\"MIDI ready!\");\n            if (verbose) listInputsAndOutputs(midiAccess);\n            midiAccess.inputs.forEach((entry) => {\n                entry.onmidimessage = onMIDIMessage;\n            });\n        } catch (err) {\n            console.log(\"Failed to get MIDI access - \" + err);\n        }\n    });\n\n    let keyBindings: Record<number, Key> = {};\n\n    let innerWidth: number;\n    $: keyWidth = Math.min((innerWidth - 36 / octaves) / (octaves * 8), 56);\n\n    function chordOn(\n        start: number,\n        type: Chord = Chord.Major,\n        inversion: Inversion = Inversion.Root,\n    ) {\n        chordOnOrOff(start, type, true, inversion);\n    }\n\n    function chordOff(\n        start: number,\n        type: Chord = Chord.Major,\n        inversion: Inversion = Inversion.Root,\n    ) {\n        chordOnOrOff(start, type, false, inversion);\n    }\n\n    function chordOnOrOff(\n        start: number,\n        chordType: Chord,\n        play: boolean,\n        inversion: Inversion,\n    ) {\n        let chordNotes = notesInChord(start, chordType, inversion);\n        chordNotes.forEach((note) => {\n            if (play) {\n                noteOn(note);\n            } else {\n                noteOff(note);\n            }\n        });\n    }\n</script>\n\n<svelte:window bind:innerWidth />\n\n<div class=\"keyboard\">\n    <div>\n        {#each notes as note}\n            <Key\n                noteNum={note}\n                {keyWidth}\n                on:notepressed={({ detail }) => noteOn(detail)}\n                on:notereleased={({ detail }) => noteOff(detail)}\n                pressed={keysPressed.includes(note)}\n                bind:this={keyBindings[midiToKey(note)]}\n            />\n        {/each}\n    </div>\n</div>\n\n<label>\n    Root Note\n    <input\n        type=\"number\"\n        bind:value={start}\n        min={notes[0]}\n        max={notes[notes.length - 1]}\n    />\n    <input\n        type=\"range\"\n        bind:value={start}\n        min={notes[0]}\n        max={notes[notes.length - 1]}\n    />\n</label>\n\n<button\n    on:mousedown={async () => {\n        let hold = 500;\n        let pause = 100;\n        let chords = [\n            [0, Chord.Major, Inversion.Root],\n            [5 - 12, Chord.Major, Inversion.Second],\n            [7 - 12, Chord.Major, Inversion.First],\n            [0, Chord.Major, Inversion.Root],\n        ];\n        for (const [offset, chordType, inversion] of chords) {\n            chordOn(start + offset, chordType, inversion);\n            await sleep(hold);\n            chordOff(start + offset, chordType, inversion);\n            await sleep(pause);\n        }\n\n        await sleep(hold);\n        const n = Math.floor(Math.random() * 8);\n        console.log(n + 1);\n        let note = getNthNoteInKey(start, n);\n        MIDI.noteOn(0, note, 127, 0);\n        await sleep(hold);\n        MIDI.noteOff(0, note, 0);\n    }}\n>\n    Guess Note\n</button>\n\n{#if verbose}\n    {#each logs as log}\n        <div>{log}</div>\n    {/each}\n{/if}\n\n<style>\n    .keyboard {\n        display: flex;\n        justify-content: center;\n    }\n    .keyboard > div {\n        display: flex;\n        overflow: auto;\n        padding: 8px;\n        height: 192px;\n    }\n</style>\n","<script>\n\timport { createEventDispatcher, onDestroy } from \"svelte\";\n\n\tconst dispatch = createEventDispatcher();\n\tconst close = () => dispatch(\"close\");\n\n\tlet modal;\n\n\tconst handle_keydown = (e) => {\n\t\tif (e.key === \"Escape\") {\n\t\t\tclose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (e.key === \"Tab\") {\n\t\t\t// Trap focus\n\t\t\tconst nodes = modal.querySelectorAll(\"*\");\n\t\t\tconst tabbable = Array.from(nodes).filter((n) => n.tabIndex >= 0);\n\n\t\t\tlet index = tabbable.indexOf(document.activeElement);\n\t\t\tif (index === -1 && e.shiftKey) index = 0;\n\n\t\t\tindex += tabbable.length + (e.shiftKey ? -1 : 1);\n\t\t\tindex %= tabbable.length;\n\n\t\t\ttabbable[index].focus();\n\t\t\te.preventDefault();\n\t\t}\n\t};\n\n\tconst previouslyFocused =\n\t\ttypeof document !== \"undefined\" && document.activeElement;\n\n\tif (previouslyFocused) {\n\t\tonDestroy(() => {\n\t\t\tpreviouslyFocused.focus();\n\t\t});\n\t}\n</script>\n\n<svelte:window on:keydown={handle_keydown} />\n\n<div class=\"modal-background\" on:click={close}></div>\n\n<div class=\"modal\" role=\"dialog\" aria-modal=\"true\" bind:this={modal}>\n\t<slot name=\"header\"></slot>\n\t<slot></slot>\n\n\t<!-- svelte-ignore a11y-autofocus -->\n\t<button autofocus on:click={close}>Close</button>\n</div>\n\n<style>\n\t.modal-background {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: rgba(0, 0, 0, 0.3);\n\t\tz-index: 3;\n\t}\n\n\t.modal {\n\t\tposition: absolute;\n\t\tleft: 50%;\n\t\ttop: 50%;\n\t\twidth: calc(100vw - 4em);\n\t\tmax-width: 32em;\n\t\tmax-height: calc(100vh - 4em);\n\t\toverflow: auto;\n\t\ttransform: translate(-50%, -50%);\n\t\tpadding: 1em;\n\t\tborder-radius: 0.2em;\n\t\tbackground: white;\n\t\tz-index: 4;\n\t}\n\n\tbutton {\n\t\tdisplay: block;\n\t\tfloat: right;\n\t}\n</style>\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from \"svelte/store\";\nexport const octaves = writable(1);\nexport const verbose = writable(false);\n","<script>\n  import Modal from \"./Modal.svelte\";\n  import { octaves, verbose } from \"./stores\";\n\n  let showModal = false;\n</script>\n\n<button on:click={() => (showModal = true)} display=\"inline-block;\">\n  ⚙️ Settings\n</button>\n\n{#if showModal}\n  <Modal on:close={() => (showModal = false)}>\n    <slot name=\"header\"><h1>Settings</h1></slot>\n    <h2>Octaves</h2>\n    <label>\n      <input type=\"radio\" bind:group={$octaves} name=\"octaves\" value={1} />\n      One\n    </label>\n\n    <label>\n      <input type=\"radio\" bind:group={$octaves} name=\"octaves\" value={2} />\n      Two\n    </label>\n\n    <label>\n      <input type=\"radio\" bind:group={$octaves} name=\"octaves\" value={3} />\n      Three\n    </label>\n\n    <h2>Debug</h2>\n    <label\n      >Enable logging:\n      <input bind:checked={$verbose} type=\"checkbox\" />\n    </label>\n  </Modal>\n{/if}\n","<script lang=\"ts\">\n    import Keyboard from \"./Keyboard.svelte\";\n    import Settings from \"./Settings.svelte\";\n    import { octaves, verbose } from \"./stores\";\n</script>\n\n<svelte:head>\n    <title>Ear Game</title>\n</svelte:head>\n\n<div class=\"nav\">\n    <h1>\n        <a href=\"https://github.com/lukemcneil/ear-game\">Ear Game</a>\n    </h1>\n    <Settings />\n</div>\n\n{#key $octaves}\n    <Keyboard octaves={$octaves} verbose={$verbose} />\n{/key}\n\n<style>\n    .nav {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n</style>\n","import App from './App.svelte';\nvar app = new App({\n    target: document.body\n});\nexport default app;\n"],"names":["noop","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","component_subscribe","component","store","callback","$$","on_destroy","push","callbacks","unsub","subscribe","unsubscribe","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","tar","src","k","assign","slice","get_slot_changes","dirty","lets","undefined","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","value","removeAttribute","getAttribute","setAttribute","to_number","set_input_value","input","set_style","key","important","style","removeProperty","setProperty","toggle_class","toggle","classList","current_component","set_current_component","get_current_component","Error","createEventDispatcher","type","detail","bubbles","e","createEvent","initCustomEvent","custom_event","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","seen_callbacks","Set","flushidx","flush","saved_component","update","pop","has","add","clear","fragment","before_update","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","create_component","mount_component","customElement","on_mount","m","new_on_destroy","map","filter","destroy_component","make_dirty","then","fill","init","instance","create_fragment","not_equal","props","append_styles","parent_component","bound","on_disconnect","context","Map","skip_bound","root","ready","ret","rest","hydrate","nodes","Array","from","childNodes","children","l","intro","SvelteComponent","$destroy","$on","index","indexOf","splice","$set","$$props","obj","$$set","keys","div","noteNum","keyWidth","pressed","dispatch","isNatural","includes","bias","keyPressed","keyReleased","$$invalidate","buttons","Chord","Inversion","factory","modules","installedModules","__webpack_require__","moduleId","exports","module","id","loaded","defineProperty","_root","_root2","__esModule","default","window","MIDI","_typeof","Symbol","iterator","constructor","prototype","_utils","Soundfont","DEBUG","USE_XHR","soundfontUrl","loadPlugin","opts","onsuccess","audioDetect","supports","hash","location","api","substr","webmidi","AudioContext","Audio","connect","audioFormat","targetFormat","__api","__audioFormat","loadResource","instruments","instrument","GM","byId","format","WebMIDI","audiotag","requestQueue","webaudio","onprogress","onerror","pending","waitForEnd","instrumentId","sendRequest","evt","progress","_onsuccess","soundfontPath","request","url","responseText","script","language","body","loadScript","verify","setDefaultPlugin","midi","_audioDetect","enumerable","get","_loadScript","_request","canPlayThrough","audio","mime","split","navigator","requestMIDIAccess","Function","toString","n","plugins","webkitAudioContext","canPlayType","vorbis","mpeg","time","Date","getTime","interval","setInterval","now","clearInterval","_globalExists","path","parts","join","object","LoadScript","loading","config","that","urls","doc","getElementsByTagName","testElement","test","getNext","hasError","batchTest","addElement","onreadystatechange","readyState","onload","removeTest","onLoad","istrue","_n","strictOrder","error","setTimeout","ID","_ID","method","headers","responseType","withCredentials","xhr","XMLHttpRequest","open","setRequestHeader","overrideMimeType","upload","total","totalBytes","lengthComputable","rawBytes","parseInt","getResponseHeader","isFinite","status","res","responseXML","JSON","parse","response","err","send","clean","replace","toLowerCase","byName","byCategory","list","num","number","category","Piano","Organ","Guitar","Bass","Strings","Ensemble","Brass","Reed","Pipe","Ethnic","Percussive","getInstrument","channelId","channel","channels","setInstrument","program","delay","getMono","mono","setMono","truthy","getOmni","omni","setOmni","getSolo","solo","setSolo","pitchBend","mute","keyToNote","noteToKey","number2key","_jasmid","Player","player","currentTime","endTime","restart","playing","timeWarp","startDelay","BPM","start","resume","startAudio","pause","tmp","stopAudio","stop","addListener","onMidiEvent","removeListener","clearAnimation","animationFrameId","cancelAnimationFrame","setAnimation","tOurTime","tTheirTime","requestAnimationFrame","frame","minutes","t1","t2","end","events","noteRegistrar","loadMidiFile","replayer","Replayer","MidiFile","currentData","getData","getLength","console","loadFile","file","atob","fetch","t","ff","mx","scc","String","fromCharCode","z","charCodeAt","getFileInstruments","programs","subtype","programNumber","queuedTime","__now","eventQueue","startTime","scheduleTracking","note","offset","message","velocity","shift","getContext","WebAudio","totalTime","fromCache","messages","foffset","performance","queueTime","setController","controllerType","programChange","noteNumber","MIDIOffset","source","noteOn","noteOff","clearTimeout","disconnect","_o","_midifile","_replayer","lastEventTypeByte","readChunk","stream","read","readInt32","readEvent","deltaTime","readVarInt","eventTypeByte","readInt8","_length","_length2","subtypeByte","readInt16","microsecondsPerBeat","hourByte","frameRate","hour","min","sec","subframe","numerator","denominator","pow","metronome","thirtyseconds","scale","param1","eventType","amount","_stream2","headerChunk","headerStream","formatType","trackCount","timeDivision","header","ticksPerBeat","tracks","trackChunk","trackStream","eof","_stream","str","position","signed","result","midiFile","eventProcessor","bpm","midiEvent","trackStates","beatsPerMinute","bpmOverride","nextEventIndex","ticksToNextEvent","getNextEvent","nextEventTrack","_i","nextEvent","_i2","ticksToEvent","track","temporal","processNext","secondsToGenerate","clone","AudioTag","volume","bufferNid","audioBuffers","notesOn","notes","nid","playChannel","instrumentNoteId","log","play","stopChannel","cId","setVolume","chordOn","chord","idx","chordOff","stopAllNotes","sources","effects","masterVolume","noteId","buffer","createBufferSource","chain","gain","destination","playbackRate","gainNode","createGain","linearRampToValueAtTime","sid","setEffects","tunajs","effect","setContext","newCtx","Tuna","_key","bufferPending","requestAudio","soundfont","base64","binaryString","bytes","Uint8Array","base64ToArrayBuffer","decodeAudioData","loadAudio","isLoaded","output","cancel","errFunction","access","pluginOutputs","outputs","notesInChord","chordType","inversion","Root","Major","applyInversion","majorChordNotes","Minor","minorChordNotes","Seventh","seventhChordNotes","MajorSeventh","majorSeventhChordNotes","First","Second","wholeText","set_data","t_value","create_if_block","input0","input0_min_value","input0_max_value","input1","input1_min_value","input1_max_value","div1","div0","label","button","each_blocks","current","octaves","middleC","keysPressed","verbose","logs","sleep","ms","midiToKey","octave","floor","_a","keyBindings","playKey","stopPlayingKey","onMIDIMessage","timeStamp","command","getNote","onMount","async","state","midiAccess","entry","inputs","manufacturer","version","listInputsAndOutputs","onmidimessage","innerWidth","chordOnOrOff","$$value","chords","random","x","getNotesInKey","getNthNoteInKey","close","modal","previouslyFocused","activeElement","onDestroy","focus","querySelectorAll","tabbable","tabIndex","shiftKey","subscriber_queue","writable","subscribers","set","new_value","run_queue","subscriber","invalidate","size","h1","h20","label0","label1","label2","input2","h21","label3","input3","showModal","$octaves","__value","$verbose","checked"],"mappings":"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"}
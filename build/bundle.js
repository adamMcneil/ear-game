var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function r(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(e,t,n,o){if(e){const r=l(e,t,n,o);return e[0](r)}}function l(e,t,n,o){return e[1]&&o?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](o(t))):n.ctx}function c(e,t,n,o){if(e[2]&&o){const r=e[2](o(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|r[o];return e}return t.dirty|r}return t.dirty}function s(e,t,n,o,r,a){if(r){const i=l(t,n,o,a);e.p(i,r)}}function d(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function f(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function g(e){return document.createTextNode(e)}function y(){return g(" ")}function b(){return g("")}function A(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function w(e){return function(t){return t.preventDefault(),e.call(this,t)}}function q(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?null:+e}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function S(e,t){e.value=null==t?"":t}function M(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function $(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}e.selectedIndex=-1}function T(e,t,n){e.classList[n?"add":"remove"](t)}let I;function E(e){I=e}function C(){if(!I)throw new Error("Function called outside component initialization");return I}function O(e){C().$$.on_mount.push(e)}function _(){const e=C();return(t,n)=>{const o=e.$$.callbacks[t];if(o){const r=function(e,t,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(e,n,!1,t),o}(t,n);o.slice().forEach((t=>{t.call(e,r)}))}}}const K=[],N=[],B=[],F=[],U=Promise.resolve();let R=!1;function W(e){B.push(e)}const P=new Set;let D=0;function j(){const e=I;do{for(;D<K.length;){const e=K[D];D++,E(e),J(e.$$)}for(E(null),K.length=0,D=0;N.length;)N.pop()();for(let e=0;e<B.length;e+=1){const t=B[e];P.has(t)||(P.add(t),t())}B.length=0}while(K.length);for(;F.length;)F.pop()();R=!1,P.clear(),E(e)}function J(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(W)}}const V=new Set;let G;function Z(){G={r:0,c:[],p:G}}function Y(){G.r||o(G.c),G=G.p}function L(e,t){e&&e.i&&(V.delete(e),e.i(t))}function X(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),G.c.push((()=>{V.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function H(e){e&&e.c()}function Q(e,n,a,i){const{fragment:u,on_mount:l,on_destroy:c,after_update:s}=e.$$;u&&u.m(n,a),i||W((()=>{const n=l.map(t).filter(r);c?c.push(...n):o(n),e.$$.on_mount=[]})),s.forEach(W)}function z(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ee(e,t){-1===e.$$.dirty[0]&&(K.push(e),R||(R=!0,U.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function te(t,r,a,i,u,l,c,s=[-1]){const d=I;E(t);const f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:n(),dirty:s,skip_bound:!1,root:r.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=a?a(t,r.props||{},((e,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&u(f.ctx[e],f.ctx[e]=r)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](r),p&&ee(t,e)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);f.fragment&&f.fragment.l(e),e.forEach(m)}else f.fragment&&f.fragment.c();r.intro&&L(t.$$.fragment),Q(t,r.target,r.anchor,r.customElement),j()}E(d)}class ne{$destroy(){z(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function oe(e){let t,n;return{c(){t=v("span"),n=g(e[2]),q(t,"class","key-number svelte-ai2hp3")},m(e,o){p(e,t,o),f(t,n)},p(e,t){4&t&&k(n,e[2])},d(e){e&&m(t)}}}function re(t){let n,r,a,i=null!==t[2]&&oe(t);return{c(){n=v("div"),i&&i.c(),M(n,"--width",t[1]-.47*t[1]*!t[6]+"px"),M(n,"transform","translate("+t[5]+"px)"),M(n,"--whiteWidth",t[1]+"px"),q(n,"draggable","false"),q(n,"class","svelte-ai2hp3"),T(n,"accidental",!t[6]),T(n,"natural",t[6]),T(n,"pressed",t[0]),T(n,"correct",t[3]),T(n,"wrong",t[4])},m(e,o){p(e,n,o),i&&i.m(n,null),r||(a=[A(n,"mousedown",w(t[7])),A(n,"mouseup",w(t[8])),A(n,"mouseenter",t[15]),A(n,"mouseleave",t[16]),A(n,"touchstart",w(t[7])),A(n,"touchend",w(t[8]))],r=!0)},p(e,[t]){null!==e[2]?i?i.p(e,t):(i=oe(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null),2&t&&M(n,"--width",e[1]-.47*e[1]*!e[6]+"px"),32&t&&M(n,"transform","translate("+e[5]+"px)"),2&t&&M(n,"--whiteWidth",e[1]+"px"),1&t&&T(n,"pressed",e[0]),8&t&&T(n,"correct",e[3]),16&t&&T(n,"wrong",e[4])},i:e,o:e,d(e){e&&m(n),i&&i.d(),r=!1,o(a)}}}function ae(e,t,n){let{noteNum:o}=t,{keyWidth:r=56}=t,{pressed:a=!1}=t,{numberInKey:i=null}=t,u=!1,l=!1;const c=_();let s=![1,3,6,8,10].includes(o%12),d=0;function f(){c("notepressed",o)}function p(){c("notereleased",o)}s||([1,6].includes(o%12)?d=-r/12:[3,10].includes(o%12)&&(d=r/12));return e.$$set=e=>{"noteNum"in e&&n(9,o=e.noteNum),"keyWidth"in e&&n(1,r=e.keyWidth),"pressed"in e&&n(0,a=e.pressed),"numberInKey"in e&&n(2,i=e.numberInKey)},[a,r,i,u,l,d,s,f,p,o,function(){return o},function(){a||n(0,a=!0)},function(){a&&n(0,a=!1)},function(e=500){n(3,u=!0),setTimeout((()=>n(3,u=!1)),e)},function(e=500){n(4,l=!0),setTimeout((()=>n(4,l=!1)),e)},e=>{e.buttons&&f()},e=>{e.buttons&&p()}]}class ie extends ne{constructor(e){super(),te(this,e,ae,re,a,{noteNum:9,keyWidth:1,pressed:0,numberInKey:2,getNote:10,playKey:11,stopPlayingKey:12,markCorrect:13,markWrong:14})}get getNote(){return this.$$.ctx[10]}get playKey(){return this.$$.ctx[11]}get stopPlayingKey(){return this.$$.ctx[12]}get markCorrect(){return this.$$.ctx[13]}get markWrong(){return this.$$.ctx[14]}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function ue(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var le,ce,se,de,fe=(le=function(e,t){var n;n=function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(2),a=(o=r)&&o.__esModule?o:{default:o};n(3),n(8),n(9),n(14),window.MIDI=a.default,t.default=a.default,e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={},e.exports=t.default},function(e,t,n){var o,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(4),i=n(2),u=(o=i)&&o.__esModule?o:{default:o};u.default.Soundfont={},u.default.DEBUG=!0,u.default.USE_XHR=!0,u.default.soundfontUrl="./soundfont/",u.default.loadPlugin=function(e){"function"==typeof e&&(e={onsuccess:e}),u.default.soundfontUrl=e.soundfontUrl||u.default.soundfontUrl,(0,a.audioDetect)((function(t){var n=window.location.hash,o="";if(t[e.api]?o=e.api:t[n.substr(1)]?o=n.substr(1):t.webmidi?o="webmidi":window.AudioContext?o="webaudio":window.Audio&&(o="audiotag"),l[o]){var r=void 0;r=e.targetFormat?e.targetFormat:t["audio/ogg"]?"ogg":"mp3",u.default.__api=o,u.default.__audioFormat=r,u.default.supports=t,u.default.loadResource(e)}}))},u.default.loadResource=function(e){var t=e.instruments||e.instrument||"acoustic_grand_piano";"object"!==(void 0===t?"undefined":r(t))&&(t=t||0===t?[t]:[]);for(var n=0;n<t.length;n++){var o=t[n];o===+o&&u.default.GM.byId[o]&&(t[n]=u.default.GM.byId[o].id)}e.format=u.default.__audioFormat,e.instruments=t,l[u.default.__api](e)};var l={webmidi:function(e){u.default.WebMIDI.connect(e)},audiotag:function(e){c(e,"AudioTag")},webaudio:function(e){c(e,"WebAudio")}},c=function(e,t){for(var n=e.format,o=e.instruments,r=e.onprogress,a=e.onerror,i=o.length,l=i,c=function(){--l||(r&&r("load",1),u.default[t].connect(e))},d=0;d<i;d++){var f=o[d];u.default.Soundfont[f]?c():s(o[d],n,(function(e,t){r&&r("load",t/i+(i-l)/i,f)}),(function(){c()}),a)}},s=function(e,t,n,o,r){var i=u.default.soundfontUrl+e+"-"+t+".js";u.default.USE_XHR?(0,a.request)({url:i,format:"text",onerror:r,onprogress:n,onsuccess:function(e,t){var n=document.createElement("script");n.language="javascript",n.type="text/javascript",n.text=t,document.body.appendChild(n),o()}}):a.loadScript.add({url:i,verify:'root.Soundfont["'+e+'"]',onerror:r,onsuccess:function(){o()}})};u.default.setDefaultPlugin=function(e){for(var t in e)u.default[t]=e[t]}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var r=n(6);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}));var a=n(7);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={},o=0,r=function(e){o++;var t=document.body,r=new window.Audio,a=e.split(";")[0];r.id="audio",r.setAttribute("preload","auto"),r.setAttribute("audiobuffer",!0),r.addEventListener("error",(function(){t.removeChild(r),n[a]=!1,o--}),!1),r.addEventListener("canplaythrough",(function(){t.removeChild(r),n[a]=!0,o--}),!1),r.src="data:"+e,t.appendChild(r)};t.audioDetect=function(e){if(navigator.requestMIDIAccess)if(Function.prototype.toString.call(navigator.requestMIDIAccess).indexOf("[native code]"))n.webmidi=!0;else for(var t=0;navigator.plugins.length>t;t++)navigator.plugins[t].name.indexOf("Jazz-Plugin")>=0&&(n.webmidi=!0);if(void 0===window.Audio)return e({});n.audiotag=!0,(window.AudioContext||window.webkitAudioContext)&&(n.webaudio=!0);var a=new window.Audio;if(void 0===a.canPlayType)return e(n);var i=a.canPlayType('audio/ogg; codecs="vorbis"');i="probably"===i||"maybe"===i;var u=a.canPlayType("audio/mpeg");if(u="probably"===u||"maybe"===u,i||u){i&&r("audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA="),u&&r("audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var l=(new Date).getTime(),c=window.setInterval((function(){var t=(new Date).getTime();o&&!(t-l>5e3)||(window.clearInterval(c),e(n))}),1)}else e(n)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){try{for(var n=(e=e.split('"').join("").split("'").join("").split("]").join("").split("[").join(".")).split("."),o=n.length,r=t||window,a=0;a<o;a++){var i=n[a];if(null==r[i])return!1;r=r[i]}return!0}catch(e){return!1}},r=function(){return this.loaded={},this.loading={},this};r.prototype.add=function(e){var t=this;"string"==typeof e&&(e={url:e});var r=e.urls;void 0===r&&(r=[{url:e.url,verify:e.verify}]);var a=document.getElementsByTagName("head")[0],i=function(e,n){t.loaded[e.url]||n&&!1===o(n)||(t.loaded[e.url]=!0,t.loading[e.url]&&t.loading[e.url](),delete t.loading[e.url],e.onsuccess&&e.onsuccess(),void 0!==p&&p())},u=!1,l=[],c=function(o){if("string"==typeof o&&(o={url:o,verify:e.verify}),/([\w\d.\[\]'"])$/.test(o.verify)){var r=o.test=o.verify;if("object"===(void 0===r?"undefined":n(r)))for(var c=0;c<r.length;c++)l.push(r[c]);else l.push(r)}if(!t.loaded[o.url]){var d=document.createElement("script");d.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||i(o)},d.onload=function(){i(o)},d.onerror=function(){if(u=!0,delete t.loading[o.url],"object"===n(o.test))for(var e in o.test)s(o.test[e]);else s(o.test)},d.setAttribute("type","text/javascript"),d.setAttribute("src",o.url),a.appendChild(d),t.loading[o.url]=function(){}}},s=function(e){for(var t=[],n=0;n<l.length;n++)l[n]!==e&&t.push(l[n]);l=t},d=function t(n){if(n)i(n,n.test);else for(var a=0;a<r.length;a++)i(r[a],r[a].test);for(var c=!0,s=0;s<l.length;s++)!1===o(l[s])&&(c=!1);!e.strictOrder&&c?u?e.error&&e.error():e.onsuccess&&e.onsuccess():setTimeout((function(){t(n)}),10)};if(e.strictOrder){var f=-1,p=function n(){if(f++,r[f]){var o=r[f],a=o.url;t.loading[a]?t.loading[a]=function(){o.onsuccess&&o.onsuccess(),n()}:t.loaded[a]?n():(c(o),d(o))}else u?e.error&&e.error():e.onsuccess&&e.onsuccess()};p()}else for(var m=0;m<r.length;m++)c(r[m]),d(r[m])},t.loadScript=new r},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.request=function(e,t,n,o){"string"==typeof e&&(e={url:e});var r=e.data,a=e.url,i=e.method||(e.data?"POST":"GET"),u=e.format,l=e.headers,c=e.responseType,s=e.withCredentials||!1,d=new window.XMLHttpRequest;if(t=t||e.onsuccess,n=n||e.onerror,o=o||e.onprogress,d.open(i,a,!0),l)for(var f in l)d.setRequestHeader(f,l[f]);else r&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");return"binary"===u&&d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined"),c&&(d.responseType=c),s&&(d.withCredentials="true"),n&&"onerror"in d&&(d.onerror=n),o&&d.upload&&"onprogress"in d.upload&&(r?d.upload.onprogress=function(e){o.call(d,e,e.loaded/e.total)}:d.addEventListener("progress",(function(e){var t=0;if(e.lengthComputable)t=e.total;else if(d.totalBytes)t=d.totalBytes;else{var n=parseInt(d.getResponseHeader("Content-Length-Raw"));if(!isFinite(n))return;d.totalBytes=t=n}o.call(d,e,e.loaded/t)}))),d.onreadystatechange=function(e){if(4===d.readyState)if(200===d.status||304===d.status||308===d.status){if(t){var o;if("xml"===u)o=e.target.responseXML;else if("text"===u)o=e.target.responseText;else if("json"===u)try{o=JSON.parse(e.target.response)}catch(t){n&&n.call(d,e)}t.call(d,e,o)}}else n&&n.call(d,e)},d.send(r),d}},function(e,t,n){var o,r=n(2),a=(o=r)&&o.__esModule?o:{default:o};a.default.GM=function(e){var t=function(e){return e.replace(/[^a-z0-9 ]/gi,"").replace(/[ ]/g,"_").toLowerCase()},n={byName:{},byId:{},byCategory:{}};for(var o in e)for(var r=e[o],a=0,i=r.length;a<i;a++){var u=r[a];if(u){var l=parseInt(u.substr(0,u.indexOf(" ")),10);u=u.replace(l+" ",""),n.byId[--l]=n.byName[t(u)]=n.byCategory[t(o)]={id:t(u),instrument:u,number:l,category:o}}}return n}({Piano:["1 Acoustic Grand Piano","2 Bright Acoustic Piano","3 Electric Grand Piano","4 Honky-tonk Piano","5 Electric Piano 1","6 Electric Piano 2","7 Harpsichord","8 Clavinet"],"Chromatic Percussion":["9 Celesta","10 Glockenspiel","11 Music Box","12 Vibraphone","13 Marimba","14 Xylophone","15 Tubular Bells","16 Dulcimer"],Organ:["17 Drawbar Organ","18 Percussive Organ","19 Rock Organ","20 Church Organ","21 Reed Organ","22 Accordion","23 Harmonica","24 Tango Accordion"],Guitar:["25 Acoustic Guitar (nylon)","26 Acoustic Guitar (steel)","27 Electric Guitar (jazz)","28 Electric Guitar (clean)","29 Electric Guitar (muted)","30 Overdriven Guitar","31 Distortion Guitar","32 Guitar Harmonics"],Bass:["33 Acoustic Bass","34 Electric Bass (finger)","35 Electric Bass (pick)","36 Fretless Bass","37 Slap Bass 1","38 Slap Bass 2","39 Synth Bass 1","40 Synth Bass 2"],Strings:["41 Violin","42 Viola","43 Cello","44 Contrabass","45 Tremolo Strings","46 Pizzicato Strings","47 Orchestral Harp","48 Timpani"],Ensemble:["49 String Ensemble 1","50 String Ensemble 2","51 Synth Strings 1","52 Synth Strings 2","53 Choir Aahs","54 Voice Oohs","55 Synth Choir","56 Orchestra Hit"],Brass:["57 Trumpet","58 Trombone","59 Tuba","60 Muted Trumpet","61 French Horn","62 Brass Section","63 Synth Brass 1","64 Synth Brass 2"],Reed:["65 Soprano Sax","66 Alto Sax","67 Tenor Sax","68 Baritone Sax","69 Oboe","70 English Horn","71 Bassoon","72 Clarinet"],Pipe:["73 Piccolo","74 Flute","75 Recorder","76 Pan Flute","77 Blown Bottle","78 Shakuhachi","79 Whistle","80 Ocarina"],"Synth Lead":["81 Lead 1 (square)","82 Lead 2 (sawtooth)","83 Lead 3 (calliope)","84 Lead 4 (chiff)","85 Lead 5 (charang)","86 Lead 6 (voice)","87 Lead 7 (fifths)","88 Lead 8 (bass + lead)"],"Synth Pad":["89 Pad 1 (new age)","90 Pad 2 (warm)","91 Pad 3 (polysynth)","92 Pad 4 (choir)","93 Pad 5 (bowed)","94 Pad 6 (metallic)","95 Pad 7 (halo)","96 Pad 8 (sweep)"],"Synth Effects":["97 FX 1 (rain)","98 FX 2 (soundtrack)","99 FX 3 (crystal)","100 FX 4 (atmosphere)","101 FX 5 (brightness)","102 FX 6 (goblins)","103 FX 7 (echoes)","104 FX 8 (sci-fi)"],Ethnic:["105 Sitar","106 Banjo","107 Shamisen","108 Koto","109 Kalimba","110 Bagpipe","111 Fiddle","112 Shanai"],Percussive:["113 Tinkle Bell","114 Agogo","115 Steel Drums","116 Woodblock","117 Taiko Drum","118 Melodic Tom","119 Synth Drum"],"Sound effects":["120 Reverse Cymbal","121 Guitar Fret Noise","122 Breath Noise","123 Seashore","124 Bird Tweet","125 Telephone Ring","126 Helicopter","127 Applause","128 Gunshot"]}),a.default.getInstrument=function(e){var t=a.default.channels[e];return t&&t.instrument},a.default.setInstrument=function(e,t,n){var o=a.default.channels[e];if(n)return setTimeout((function(){o.instrument=t}),n);o.instrument=t},a.default.getMono=function(e){var t=a.default.channels[e];return t&&t.mono},a.default.setMono=function(e,t,n){var o=a.default.channels[e];if(n)return setTimeout((function(){o.mono=t}),n);o.mono=t},a.default.getOmni=function(e){var t=a.default.channels[e];return t&&t.omni},a.default.setOmni=function(e,t,n){var o=a.default.channels[e];if(n)return setTimeout((function(){o.omni=t}),n);o.omni=t},a.default.getSolo=function(e){var t=a.default.channels[e];return t&&t.solo},a.default.setSolo=function(e,t,n){var o=a.default.channels[e];if(n)return setTimeout((function(){o.solo=t}),n);o.solo=t},a.default.channels=function(){for(var e={},t=0;t<16;t++)e[t]={instrument:t,pitchBend:0,mute:!1,mono:!1,omni:!1,solo:!1};return e}(),a.default.keyToNote={},a.default.noteToKey={},function(){for(var e=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],t=21;t<=108;t++){var n=e[t%12]+((t-12)/12>>0);a.default.keyToNote[n]=t,a.default.noteToKey[t]=n}}()},function(e,t,n){var o,r=n(10),a=n(2),i=(o=a)&&o.__esModule?o:{default:o};!function(){i.default.Player={};var e=i.default.Player;e.currentTime=0,e.endTime=0,e.restart=0,e.playing=!1,e.timeWarp=1,e.startDelay=0,e.BPM=120,e.start=e.resume=function(t){e.currentTime<-1&&(e.currentTime=-1),f(e.currentTime,null,t)},e.pause=function(){var t=e.restart;p(),e.restart=t},e.stop=function(){p(),e.restart=0,e.currentTime=0},e.addListener=function(e){n=e},e.removeListener=function(){n=void 0},e.clearAnimation=function(){e.animationFrameId&&window.cancelAnimationFrame(e.animationFrameId)},e.setAnimation=function(t){var n=0,o=0,r=0;e.clearAnimation(),window.requestAnimationFrame((function a(){if(e.animationFrameId=window.requestAnimationFrame(a),0!==e.endTime){e.playing?(n=r===e.currentTime?o-Date.now():0,n=0===e.currentTime?0:e.currentTime-n,r!==e.currentTime&&(o=Date.now(),r=e.currentTime)):n=e.currentTime;var i=e.endTime,u=n/1e3,c=u/60,s=60*c+(u-60*c),d=i/1e3;d-s<-1||t({now:s,end:d,events:l})}}))},e.loadMidiFile=function(t,n,o){try{e.replayer=new r.Replayer((0,r.MidiFile)(e.currentData),e.timeWarp,null,e.BPM),e.data=e.replayer.getData(),e.endTime=d(),i.default.loadPlugin({onsuccess:t,onprogress:n,onerror:o})}catch(e){console.error(e),o&&o(e)}},e.loadFile=function(t,n,o,r){if(e.stop(),-1!==t.indexOf("base64,")){var a=window.atob(t.split(",")[1]);e.currentData=a,e.loadMidiFile(n,o,r)}else{var i=new window.XMLHttpRequest;i.open("GET",t),i.overrideMimeType("text/plain; charset=x-user-defined"),i.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){for(var t=this.responseText||"",a=[],i=t.length,u=String.fromCharCode,l=0;l<i;l++)a[l]=u(255&t.charCodeAt(l));var c=a.join("");e.currentData=c,e.loadMidiFile(n,o,r)}else r&&r("Unable to load MIDI file")},i.send()}},e.getFileInstruments=function(){for(var t={},n={},o=0;o<e.data.length;o++){var r=e.data[o][0].event;if("channel"===r.type){var a=r.channel;switch(r.subtype){case"controller":break;case"programChange":n[a]=r.programNumber;break;case"noteOn":var u=n[a];t[i.default.GM.byId[isFinite(u)?u:a].id]=!0}}}var l=[];for(var c in t)l.push(c);return l};var t,n,o,a=[],u=0,l={},c=function(o,r,i,u,c,s,d){return setTimeout((function(){var u={channel:o,note:r,now:i,end:e.endTime,message:c,velocity:s};128===c?delete l[r]:l[r]=u,n&&n(u),e.currentTime=i,a.shift(),(a.length<1e3||e.currentTime===t&&t<e.endTime)&&f(t,!0)}),i-u)},s=function(){return"webaudio"===i.default.api?i.default.WebAudio.getContext():(e.ctx={currentTime:0},e.ctx)},d=function(){for(var t=e.data,n=t.length,o=.5,r=0;r<n;r++)o+=t[r][1];return o},f=function(n,r,l){if(e.replayer){var f;r||(void 0===n&&(n=e.restart),e.playing&&p(),e.playing=!0,e.data=e.replayer.getData(),e.endTime=d());var m=0,h=0,v=e.data,g=s(),y=v.length;t=.5;var b=n-e.currentTime;if("webaudio"!==i.default.api){var A=window.performance&&window.performance.now?window.performance.now():Date.now();o=o||A,g.currentTime=(A-o)/1e3}u=g.currentTime;for(var w=0;w<y&&h<100;w++){var q=v[w];if((t+=q[1])<=n)m=t;else{n=t-m;var x=q[0].event;if("channel"===x.type){var k=x.channel,S=i.default.channels[k],M=g.currentTime+(n+b+e.startDelay)/1e3,$=t-m+e.startDelay;switch(x.subtype){case"controller":i.default.setController(k,x.controllerType,x.value,M);break;case"programChange":i.default.programChange(k,x.programNumber,M);break;case"pitchBend":i.default.pitchBend(k,x.value,M);break;case"noteOn":if(S.mute)break;f=x.noteNumber-(e.MIDIOffset||0),a.push({event:x,time:$,source:i.default.noteOn(k,x.noteNumber,x.velocity,M),interval:c(k,f,t+e.startDelay,m-b,144,x.velocity)}),h++;break;case"noteOff":if(S.mute)break;f=x.noteNumber-(e.MIDIOffset||0),a.push({event:x,time:$,source:i.default.noteOff(k,x.noteNumber,M),interval:c(k,f,t,m-b,128,0)})}}}}l&&l(a)}},p=function(){var t=s();for(e.playing=!1,e.restart+=1e3*(t.currentTime-u);a.length;){var o=a.pop();window.clearInterval(o.interval),o.source&&("number"==typeof o.source?window.clearTimeout(o.source):o.source.disconnect(0))}for(var r in l){var i=l[r];144===l[r].message&&n&&n({channel:i.channel,note:i.note,now:i.now,end:i.end,message:128,velocity:i.velocity})}l={}}}()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(11);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})}));var r=n(13);Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MidiFile=function(e){var t;function n(e){var t=e.read(4),n=e.readInt32();return{id:t,length:n,data:e.read(n)}}function o(e){var n={};n.deltaTime=e.readVarInt();var o=e.readInt8();if(240==(240&o)){if(255!==o){if(240===o){n.type="sysEx";var r=e.readVarInt();return n.data=e.read(r),n}if(247===o){n.type="dividedSysEx";var a=e.readVarInt();return n.data=e.read(a),n}throw new Error("Unrecognised MIDI event type byte: "+o)}n.type="meta";var i=e.readInt8(),u=e.readVarInt();switch(i){case 0:if(n.subtype="sequenceNumber",2!==u)throw new Error("Expected length for sequenceNumber event is 2, got "+u);return n.number=e.readInt16(),n;case 1:return n.subtype="text",n.text=e.read(u),n;case 2:return n.subtype="copyrightNotice",n.text=e.read(u),n;case 3:return n.subtype="trackName",n.text=e.read(u),n;case 4:return n.subtype="instrumentName",n.text=e.read(u),n;case 5:return n.subtype="lyrics",n.text=e.read(u),n;case 6:return n.subtype="marker",n.text=e.read(u),n;case 7:return n.subtype="cuePoint",n.text=e.read(u),n;case 32:if(n.subtype="midiChannelPrefix",1!==u)throw new Error("Expected length for midiChannelPrefix event is 1, got "+u);return n.channel=e.readInt8(),n;case 47:if(n.subtype="endOfTrack",0!==u)throw new Error("Expected length for endOfTrack event is 0, got "+u);return n;case 81:if(n.subtype="setTempo",3!==u)throw new Error("Expected length for setTempo event is 3, got "+u);return n.microsecondsPerBeat=(e.readInt8()<<16)+(e.readInt8()<<8)+e.readInt8(),n;case 84:if(n.subtype="smpteOffset",5!==u)throw new Error("Expected length for smpteOffset event is 5, got "+u);var l=e.readInt8();return n.frameRate={0:24,32:25,64:29,96:30}[96&l],n.hour=31&l,n.min=e.readInt8(),n.sec=e.readInt8(),n.frame=e.readInt8(),n.subframe=e.readInt8(),n;case 88:if(n.subtype="timeSignature",4!==u)throw new Error("Expected length for timeSignature event is 4, got "+u);return n.numerator=e.readInt8(),n.denominator=Math.pow(2,e.readInt8()),n.metronome=e.readInt8(),n.thirtyseconds=e.readInt8(),n;case 89:if(n.subtype="keySignature",2!==u)throw new Error("Expected length for keySignature event is 2, got "+u);return n.key=e.readInt8(!0),n.scale=e.readInt8(),n;case 127:return n.subtype="sequencerSpecific",n.data=e.read(u),n;default:return n.subtype="unknown",n.data=e.read(u),n}}else{var c;0==(128&o)?(c=o,o=t):(c=e.readInt8(),t=o);var s=o>>4;switch(n.channel=15&o,n.type="channel",s){case 8:return n.subtype="noteOff",n.noteNumber=c,n.velocity=e.readInt8(),n;case 9:return n.noteNumber=c,n.velocity=e.readInt8(),0===n.velocity?n.subtype="noteOff":n.subtype="noteOn",n;case 10:return n.subtype="noteAftertouch",n.noteNumber=c,n.amount=e.readInt8(),n;case 11:return n.subtype="controller",n.controllerType=c,n.value=e.readInt8(),n;case 12:return n.subtype="programChange",n.programNumber=c,n;case 13:return n.subtype="channelAftertouch",n.amount=c,n;case 14:return n.subtype="pitchBend",n.value=c+(e.readInt8()<<7),n;default:throw new Error("Unrecognised MIDI event type: "+s)}}}var r=(0,a.default)(e),i=n(r);if("MThd"!==i.id||6!==i.length)throw new Error("Bad .mid file - header not found");var u=(0,a.default)(i.data),l=u.readInt16(),c=u.readInt16(),s=u.readInt16();if(32768&s)throw new Error("Expressing time division in SMTPE frames is not supported yet");for(var d={formatType:l,trackCount:c,ticksPerBeat:s},f=[],p=0;p<d.trackCount;p++){f[p]=[];var m=n(r);if("MTrk"!==m.id)throw new Error("Unexpected chunk - expected MTrk, got "+m.id);for(var h=(0,a.default)(m.data);!h.eof();){var v=o(h);f[p].push(v)}}return{header:d,tracks:f}};var o,r=n(12),a=(o=r)&&o.__esModule?o:{default:o}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=0;function n(n){var o=e.charCodeAt(t);return n&&o>127&&(o-=256),t+=1,o}return{eof:function(){return t>=e.length},read:function(n){var o=e.substr(t,n);return t+=n,o},readInt32:function(){var n=(e.charCodeAt(t)<<24)+(e.charCodeAt(t+1)<<16)+(e.charCodeAt(t+2)<<8)+e.charCodeAt(t+3);return t+=4,n},readInt16:function(){var n=(e.charCodeAt(t)<<8)+e.charCodeAt(t+1);return t+=2,n},readInt8:n,readVarInt:function(){for(var e=0;;){var t=n();if(!(128&t))return e+t;e+=127&t,e<<=7}}}},e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.Replayer=function(e,t,n,r){for(var a,i=[],u=r||120,l=!!r,c=e.header.ticksPerBeat,s=0;s<e.tracks.length;s++)i[s]={nextEventIndex:0,ticksToNextEvent:e.tracks[s].length?e.tracks[s][0].deltaTime:null};function d(){for(var t=null,n=null,o=null,r=0;r<i.length;r++)null!=i[r].ticksToNextEvent&&(null==t||i[r].ticksToNextEvent<t)&&(t=i[r].ticksToNextEvent,n=r,o=i[r].nextEventIndex);if(null!=n){var a=e.tracks[n][o];e.tracks[n][o+1]?i[n].ticksToNextEvent+=e.tracks[n][o+1].deltaTime:i[n].ticksToNextEvent=null,i[n].nextEventIndex+=1;for(var u=0;u<i.length;u++)null!=i[u].ticksToNextEvent&&(i[u].ticksToNextEvent-=t);return{ticksToEvent:t,event:a,track:n}}return null}var f=[];return function(){function e(){l||"meta"!==a.event.type||"setTempo"!==a.event.subtype||(u=6e7/a.event.microsecondsPerBeat);var e=0;a.ticksToEvent>0&&(e=a.ticksToEvent/c/(u/60));var n=1e3*e*t||0;f.push([a,n]),a=d()}if(a=d())for(;a;)e()}(),{getData:function(){return o(f)}}};var o=function e(t){if("object"!==(void 0===t?"undefined":n(t)))return t;if(null===t)return t;var o="number"==typeof t.length?[]:{};for(var r in t)o[r]=e(t[r]);return o}},function(e,t,n){n(15),n(16),n(17)},function(e,t,n){var o,r=n(2),a=(o=r)&&o.__esModule?o:{default:o};window.Audio&&function(){for(var e=a.default.AudioTag={api:"audiotag"},t={},n=127,o=-1,r=[],i=[],u={},l=0;l<12;l++)r[l]=new window.Audio;var c=function(e,t){if(a.default.channels[e]){var l=a.default.channels[e].instrument,c=a.default.GM.byId[l].id;if(t=u[t]){var s=c+""+t.id,d=(o+1)%r.length,f=r[d];if(i[d]=s,!a.default.Soundfont[c])return void(a.default.DEBUG&&console.log("404",c));f.src=a.default.Soundfont[c][t.id],f.volume=n/127,f.play(),o=d}}},s=function(e,t){if(a.default.channels[e]){var n=a.default.channels[e].instrument,l=a.default.GM.byId[n].id;if(t=u[t])for(var c=l+""+t.id,s=0,d=r.length;s<d;s++){var f=(s+o+1)%d,p=i[f];if(p&&p===c)return r[f].pause(),void(i[f]=null)}}};e.audioBuffers=r,e.send=function(e,t){},e.setController=function(e,t,n,o){},e.setVolume=function(e,t){n=t},e.programChange=function(e,t){a.default.channels[e].instrument=t},e.pitchBend=function(e,t,n){},e.noteOn=function(e,n,o,r){var a=t[n];if(u[a])return r?setTimeout((function(){c(e,a)}),1e3*r):void c(e,a)},e.noteOff=function(e,t,n){},e.chordOn=function(e,n,o,r){for(var a=0;a<n.length;a++){var i=n[a],l=t[i];if(u[l]){if(r)return setTimeout((function(){c(e,l)}),1e3*r);c(e,l)}}},e.chordOff=function(e,n,o){for(var r=0;r<n.length;r++){var a=n[r],i=t[a];if(u[i]){if(o)return setTimeout((function(){s(e,i)}),1e3*o);s(e,i)}}},e.stopAllNotes=function(){for(var e=0,t=r.length;e<t;e++)r[e].pause()},e.connect=function(n){for(var o in a.default.setDefaultPlugin(e),a.default.keyToNote)t[a.default.keyToNote[o]]=o,u[o]={id:o};n.onsuccess&&n.onsuccess()}}()},function(e,t,n){var o,r=n(2),a=(o=r)&&o.__esModule?o:{default:o};window.AudioContext&&function(){var e,t=a.default.WebAudio={api:"webaudio"},n={},o={},r=127,i={};t.audioBuffers=i,t.send=function(e,t){},t.setController=function(e,t,n,o){},t.setVolume=function(e,t,n){n?setTimeout((function(){r=t}),1e3*n):r=t},t.programChange=function(e,t,n){a.default.channels[e].instrument=t},t.pitchBend=function(e,t,n){a.default.channels[e].pitchBend=t},t.noteOn=function(t,u,l,c){c=c||0;var s=a.default.channels[t].instrument,d=i[s+""+u];if(d){var f;if(c<e.currentTime&&(c+=e.currentTime),(f=e.createBufferSource()).buffer=d,o){var p=f;for(var m in o)p.connect(o[m].input),p=o[m]}var h=l/127*(r/127)*2-1;return f.connect(e.destination),f.playbackRate.value=1,f.gainNode=e.createGain(),f.gainNode.connect(e.destination),f.gainNode.gain.value=Math.min(1,Math.max(-1,h)),f.connect(f.gainNode),f.start(c||0),n[t+""+u]=f,f}},t.noteOff=function(t,o,r){r=r||0;var u=a.default.channels[t].instrument;if(i[u+""+o]){r<e.currentTime&&(r+=e.currentTime);var l=n[t+""+o];if(l){if(l.gainNode){var c=l.gainNode.gain;c.linearRampToValueAtTime(c.value,r),c.linearRampToValueAtTime(-1,r+.3)}return l.noteOff?l.noteOff(r+.5):l.stop(r+.5),delete n[t+""+o],l}}},t.chordOn=function(e,n,o,r){for(var a,i={},u=0,l=n.length;u<l;u++)i[a=n[u]]=t.noteOn(e,a,o,r);return i},t.chordOff=function(e,n,o){for(var r,a={},i=0,u=n.length;i<u;i++)a[r=n[i]]=t.noteOff(e,r,o);return a},t.stopAllNotes=function(){for(var t in n){var o=0;o<e.currentTime&&(o+=e.currentTime);var r=n[t];r.gain.linearRampToValueAtTime(1,o),r.gain.linearRampToValueAtTime(0,o+.3),r.noteOff?r.noteOff(o+.3):r.stop(o+.3),delete n[t]}},t.setEffects=function(t){if(!e.tunajs)return console.log("Effects module not installed.");for(var n=0;n<t.length;n++){var r=t[n],a=new e.tunajs[r.type](r);a.connect(e.destination),o[r.type]=a}},t.connect=function(n){a.default.setDefaultPlugin(t),t.setContext(e||new(window.AudioContext||window.webkitAudioContext),n.onsuccess)},t.getContext=function(){return e},t.setContext=function(t,n,o,r){e=t,void 0===window.Tuna||e.tunajs||(e.tunajs=new window.Tuna(e));var u=[],l=a.default.keyToNote;for(var c in l)u.push(c);var s=function(e){for(var t in f)if(f[t])return;n&&(n(),n=null)},d=function(t,n,o,r){var u=t[r];u&&(f[n]++,function(t,n,o){if(0===t.indexOf("data:audio")){var r=function(e){for(var t=window.atob(e),n=t.length,o=new Uint8Array(n),r=0;r<n;r++)o[r]=t.charCodeAt(r);return o.buffer}(t.split(",")[1]);e.decodeAudioData(r,n,o)}else{var a=new window.XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){e.decodeAudioData(a.response,n,o)},a.send()}}(u,(function(e){e.id=r;var o=a.default.keyToNote[r];i[n+""+o]=e,0==--f[n]&&(t.isLoaded=!0,s())}),(function(e){console.error(e)})))},f={};for(var p in a.default.Soundfont){var m=a.default.Soundfont[p];if(!m.isLoaded){var h=a.default.GM.byName[p].number;f[h]=0;for(var v=0;v<u.length;v++)d(m,h,0,u[v])}}setTimeout(s,1)}}()},function(e,t,n){var o,r=n(2),a=(o=r)&&o.__esModule?o:{default:o};!function(){var e=null,t=a.default.WebMIDI={api:"webmidi"};t.send=function(t,n){e.send(t,1e3*n)},t.setController=function(t,n,o,r){e.send([t,n,o],1e3*r)},t.setVolume=function(t,n,o){e.send([176+t,7,n],1e3*o)},t.programChange=function(t,n,o){e.send([192+t,n],1e3*o)},t.pitchBend=function(t,n,o){e.send([224+t,n],1e3*o)},t.noteOn=function(t,n,o,r){e.send([144+t,n,o],1e3*r)},t.noteOff=function(t,n,o){e.send([128+t,n,0],1e3*o)},t.chordOn=function(t,n,o,r){for(var a=0;a<n.length;a++){var i=n[a];e.send([144+t,i,o],1e3*r)}},t.chordOff=function(t,n,o){for(var r=0;r<n.length;r++){var a=n[r];e.send([128+t,a,0],1e3*o)}},t.stopAllNotes=function(){e.cancel();for(var t=0;t<16;t++)e.send([176+t,123,0])},t.connect=function(n){a.default.setDefaultPlugin(t);var o=function(e){if(window.AudioContext)n.api="webaudio";else{if(!window.Audio)return e;n.api="audiotag"}a.default.loadPlugin(n)};navigator.requestMIDIAccess().then((function(t){var r=t.outputs;void 0===(e="function"==typeof r?r()[0]:r[0])?o():n.onsuccess&&n.onsuccess()}),o)}}()}])},e.exports=n()},le(ce={exports:{}},ce.exports),ce.exports),pe=ue(fe);!function(e){e[e.Major=0]="Major",e[e.Minor=1]="Minor",e[e.Seventh=2]="Seventh",e[e.MajorSeventh=3]="MajorSeventh",e[e.MinorSeventh=4]="MinorSeventh",e[e.MajorSixth=5]="MajorSixth",e[e.MinorSixth=6]="MinorSixth",e[e.Diminished=7]="Diminished",e[e.Augmented=8]="Augmented"}(se||(se={})),function(e){e[e.Root=0]="Root",e[e.First=1]="First",e[e.Second=2]="Second"}(de||(de={}));const me={[se.Major]:[0,4,7],[se.Minor]:[0,3,7],[se.Seventh]:[0,4,7,10],[se.MajorSeventh]:[0,4,7,11],[se.MinorSeventh]:[0,3,7,10],[se.MajorSixth]:[0,4,7,9],[se.MinorSixth]:[0,3,7,9],[se.Diminished]:[0,3,6],[se.Augmented]:[0,4,8]};function he(e,t,n=de.Root){let o=me[t];return o=o.map((t=>t+e)),function(e,t){if(0==e.length)return;switch(t){case de.First:e[0]+=12;break;case de.Second:e[0]+=12,e[1]+=12}}(o,n),o}const ve=[0,2,4,5,7,9,11,12];function ge(e){return ve.map((t=>t+e))}function ye(e,t){return ge(e)[t]}function be(e,t){let n=(t-e)%12;n<0&&(n+=12);const o=ve.indexOf(n);return o>=0?o+1:null}function Ae(e,t,n){const o=e.slice();return o[38]=t[n],o}function we(e,t,n){const o=e.slice();return o[41]=t[n],o[43]=n,o}function qe(e,t,n){const o=e.slice();return o[44]=t[n],o[45]=t,o[46]=n,o}function xe(e,t,n){const o=e.slice();return o[41]=t[n],o[47]=t,o[43]=n,o}function ke(e){let t,n,r,a,i,u,l=e[41]+"";function c(){e[23].call(a,e[43])}return{c(){t=v("label"),n=g(l),r=y(),a=v("input"),q(a,"type","checkbox")},m(o,l){p(o,t,l),f(t,n),f(t,r),f(t,a),a.checked=e[8][e[43]],i||(u=[A(a,"change",c),A(a,"change",e[24])],i=!0)},p(t,n){e=t,256&n[0]&&(a.checked=e[8][e[43]])},d(e){e&&m(t),i=!1,o(u)}}}function Se(e){let t,n,o=e[44];const r=()=>e[25](t,o),a=()=>e[25](null,o);let i={noteNum:e[44],keyWidth:e[11],pressed:e[0].includes(e[44]),numberInKey:1==be(e[2],e[44])?1:null};return t=new ie({props:i}),r(),t.$on("notepressed",e[26]),t.$on("notereleased",e[27]),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){o!==e[44]&&(a(),o=e[44],r());const i={};16&n[0]&&(i.noteNum=e[44]),2048&n[0]&&(i.keyWidth=e[11]),17&n[0]&&(i.pressed=e[0].includes(e[44])),20&n[0]&&(i.numberInKey=1==be(e[2],e[44])?1:null),t.$set(i)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){a(),z(t,e)}}}function Me(e){let t,n,o,r=e[4],a=[];for(let t=0;t<r.length;t+=1)a[t]=Se(qe(e,r,t));const i=e=>X(a[e],1,1,(()=>{a[e]=null}));return{c(){t=v("div"),n=v("div");for(let e=0;e<a.length;e+=1)a[e].c();q(t,"class","keyboard")},m(e,r){p(e,t,r),f(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);o=!0},p(e,t){if(60437&t[0]){let o;for(r=e[4],o=0;o<r.length;o+=1){const i=qe(e,r,o);a[o]?(a[o].p(i,t),L(a[o],1)):(a[o]=Se(i),a[o].c(),L(a[o],1),a[o].m(n,null))}for(Z(),o=r.length;o<a.length;o+=1)i(o);Y()}},i(e){if(!o){for(let e=0;e<r.length;e+=1)L(a[e]);o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)X(a[e]);o=!1},d(e){e&&m(t),h(a,e)}}}function $e(t){let n,o,r;return{c(){n=v("button"),n.textContent="Guess Chord"},m(e,a){p(e,n,a),o||(r=A(n,"mousedown",t[28]),o=!0)},p:e,d(e){e&&m(n),o=!1,r()}}}function Te(e){let t,n,o,r,a,i=e[12],u=[];for(let t=0;t<i.length;t+=1)u[t]=Ee(we(e,i,t));return{c(){t=v("button"),t.textContent="Replay",n=y();for(let e=0;e<u.length;e+=1)u[e].c();o=b()},m(i,l){p(i,t,l),p(i,n,l);for(let e=0;e<u.length;e+=1)u[e].m(i,l);p(i,o,l),r||(a=A(t,"mousedown",e[29]),r=!0)},p(e,t){if(135424&t[0]){let n;for(i=e[12],n=0;n<i.length;n+=1){const r=we(e,i,n);u[n]?u[n].p(r,t):(u[n]=Ee(r),u[n].c(),u[n].m(o.parentNode,o))}for(;n<u.length;n+=1)u[n].d(1);u.length=i.length}},d(e){e&&m(t),e&&m(n),h(u,e),e&&m(o),r=!1,a()}}}function Ie(e){let t,n,o,r,a,i=e[41]+"";function u(){return e[30](e[41])}return{c(){t=v("button"),n=g(i),o=y()},m(e,i){p(e,t,i),f(t,n),f(t,o),r||(a=A(t,"mousedown",u),r=!0)},p(t,n){e=t},d(e){e&&m(t),r=!1,a()}}}function Ee(e){let t,n=e[8][e[43]]&&Ie(e);return{c(){n&&n.c(),t=b()},m(e,o){n&&n.m(e,o),p(e,t,o)},p(e,o){e[8][e[43]]?n?n.p(e,o):(n=Ie(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&m(t)}}}function Ce(e){let t,n=e[9],o=[];for(let t=0;t<n.length;t+=1)o[t]=Oe(Ae(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=b()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);p(e,t,n)},p(e,r){if(512&r[0]){let a;for(n=e[9],a=0;a<n.length;a+=1){const i=Ae(e,n,a);o[a]?o[a].p(i,r):(o[a]=Oe(i),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(e){h(o,e),e&&m(t)}}}function Oe(e){let t,n,o=e[38]+"";return{c(){t=v("div"),n=g(o)},m(e,o){p(e,t,o),f(t,n)},p(e,t){512&t[0]&&o!==(o=e[38]+"")&&k(n,o)},d(e){e&&m(t)}}}function _e(t){let n,r,i,u,l,c,s,d,w,k,M,$,T,I,E,C,O,_,K=t[2],N=null==t[5]&&t[8].includes(!0);W(t[19]);let B=t[12],F=[];for(let e=0;e<B.length;e+=1)F[e]=ke(xe(t,B,e));let U=Me(t),R=N&&$e(t),P=null!=t[5]&&!t[6]&&Te(t),D=t[1]&&Ce(t);return{c(){n=v("label"),r=g("Root Note\n    "),i=v("input"),u=y(),l=v("input"),c=y(),s=v("label"),d=g("Random Root\n    "),w=v("input"),k=y();for(let e=0;e<F.length;e+=1)F[e].c();M=y(),U.c(),$=y(),R&&R.c(),T=y(),P&&P.c(),I=y(),D&&D.c(),E=b(),q(i,"type","number"),q(i,"min",Ke),q(i,"max",Ne),q(l,"type","range"),q(l,"min",Ke),q(l,"max",Ne),q(w,"type","checkbox")},m(e,o){p(e,n,o),f(n,r),f(n,i),S(i,t[2]),f(n,u),f(n,l),S(l,t[2]),p(e,c,o),p(e,s,o),f(s,d),f(s,w),w.checked=t[7],p(e,k,o);for(let t=0;t<F.length;t+=1)F[t].m(e,o);p(e,M,o),U.m(e,o),p(e,$,o),R&&R.m(e,o),p(e,T,o),P&&P.m(e,o),p(e,I,o),D&&D.m(e,o),p(e,E,o),C=!0,O||(_=[A(window,"resize",t[19]),A(i,"input",t[20]),A(l,"change",t[21]),A(l,"input",t[21]),A(w,"change",t[22])],O=!0)},p(t,n){if(4&n[0]&&x(i.value)!==t[2]&&S(i,t[2]),4&n[0]&&S(l,t[2]),128&n[0]&&(w.checked=t[7]),4384&n[0]){let e;for(B=t[12],e=0;e<B.length;e+=1){const o=xe(t,B,e);F[e]?F[e].p(o,n):(F[e]=ke(o),F[e].c(),F[e].m(M.parentNode,M))}for(;e<F.length;e+=1)F[e].d(1);F.length=B.length}4&n[0]&&a(K,K=t[2])?(Z(),X(U,1,1,e),Y(),U=Me(t),U.c(),L(U),U.m($.parentNode,$)):U.p(t,n),288&n[0]&&(N=null==t[5]&&t[8].includes(!0)),N?R?R.p(t,n):(R=$e(t),R.c(),R.m(T.parentNode,T)):R&&(R.d(1),R=null),null==t[5]||t[6]?P&&(P.d(1),P=null):P?P.p(t,n):(P=Te(t),P.c(),P.m(I.parentNode,I)),t[1]?D?D.p(t,n):(D=Ce(t),D.c(),D.m(E.parentNode,E)):D&&(D.d(1),D=null)},i(e){C||(L(U),C=!0)},o(e){X(U),C=!1},d(e){e&&m(n),e&&m(c),e&&m(s),e&&m(k),h(F,e),e&&m(M),U.d(e),e&&m($),R&&R.d(e),e&&m(T),P&&P.d(e),e&&m(I),D&&D.d(e),e&&m(E),O=!1,o(_)}}}let Ke=60,Ne=72;function Be(e,t,n){let o,r,{octaves:a=2}=t,{keysPressed:i=[]}=t,{verbose:u}=t,l=60,c=null,s=!1,d=!0;const f=Object.values(se).filter((e=>"string"==typeof e)),p=[se.Major,se.Minor,se.Seventh].map((e=>se[e]));let m=f.map((e=>p.includes(e))),h=[];const v=e=>new Promise((t=>setTimeout(t,e)));function g(e){e<r[0]&&(e+=12*a);let t=Math.floor(e/(12*a)),n=(e-l)%(12*a);return t%(a+1)!=0||0!=n&&1!=n?n:12*a+n}function y(e,t=127,o=!0,r=!1,a=!1){var i,u,l;if(n(9,h=[`Note ${e} was pressed!`,...h]),pe.noteOn(0,e,t,0),o){let t=g(e);null===(i=q[t])||void 0===i||i.playKey(),r&&(null===(u=q[t])||void 0===u||u.markCorrect()),a&&(null===(l=q[t])||void 0===l||l.markWrong())}}function b(e){var t;n(9,h=[`Note ${e} was released!`,...h]),pe.noteOff(0,e,0);let o=g(e);null===(t=q[o])||void 0===t||t.stopPlayingKey()}function A(e){var t;if(u){let t="MIDI message received at timestamp "+e.timeStamp+"["+e.data.length+" bytes]: ";for(let n=0;n<e.data.length;n++)t+="0x"+e.data[n].toString(16)+" ",e.data;console.log(t)}const n=e.data[0],o=null===(t=q[g(e.data[1])])||void 0===t?void 0:t.getNote(),r=e.data.length>2?e.data[2]:0;switch(n){case 144:r>0?y(o):b(o);break;case 128:b(o)}}O((async()=>{pe.loadPlugin({soundfontUrl:"./soundfont/",instrument:"acoustic_grand_piano",onprogress(e,t){console.log(e,t)},onsuccess(){pe.setVolume(0,127)}});try{let e=await navigator.requestMIDIAccess();console.log("MIDI ready!"),u&&function(e){for(const t of e.inputs){const e=t[1];console.log("Input port [type:'"+e.type+"'] id:'"+e.id+"' manufacturer:'"+e.manufacturer+"' name:'"+e.name+"' version:'"+e.version+"'")}for(const t of e.outputs){const e=t[1];console.log("Output port [type:'"+e.type+"'] id:'"+e.id+"' manufacturer:'"+e.manufacturer+"' name:'"+e.name+"' version:'"+e.version+"'")}}(e),e.inputs.forEach((e=>{e.onmidimessage=A}))}catch(e){console.log("Failed to get MIDI access - "+e)}}));let w,q={};function k(e,t=se.Major,n=de.Root,o=!0,r=!1,a=!1){M(e,t,!0,n,o,r,a)}function S(e,t=se.Major,n=de.Root){M(e,t,!1,n)}function M(e,t,n,o,r=!0,a=!1,i=!1){he(e,t,o).forEach((e=>{n?y(e,127,r,a,i):b(e)}))}async function $(e){if(n(6,s=!0),e){if(n(5,c=function(){let e=f.filter(((e,t)=>m[t]));return se[e[Math.floor(Math.random()*e.length)]]}()),null==c)return;d&&n(2,l=Math.floor(Math.random()*(Ne-Ke))+Ke)}k(l,c,de.Root,!1),await v(500),S(l,c,de.Root),n(6,s=!1)}async function T(e){let t=se[e];n(6,s=!0);const o=t==c;k(l,t,de.Root,!0,o,!o),await v(500),S(l,t,de.Root),o&&n(5,c=null),n(6,s=!1)}return e.$$set=e=>{"octaves"in e&&n(18,a=e.octaves),"keysPressed"in e&&n(0,i=e.keysPressed),"verbose"in e&&n(1,u=e.verbose)},e.$$.update=()=>{if(262148&e.$$.dirty[0]){let e=0,t=12*a+1;![1,3,6,8,10].includes(l%12)||(e-=1,t+=1);const o=Array.from({length:t-e},((t,n)=>n+e));n(4,r=o.map((e=>e+(l-12*Math.floor(a/2)))))}262152&e.$$.dirty[0]&&n(11,o=Math.min((w-36/a)/(8*a),56))},[i,u,l,w,r,c,s,d,m,h,q,o,f,g,y,b,$,T,a,function(){n(3,w=window.innerWidth)},function(){l=x(this.value),n(2,l)},function(){l=x(this.value),n(2,l)},function(){d=this.checked,n(7,d)},function(e){m[e]=this.checked,n(8,m)},()=>n(5,c=null),function(e,t){N[e?"unshift":"push"]((()=>{q[g(t)]=e,n(10,q)}))},({detail:e})=>y(e),({detail:e})=>b(e),async()=>{await $(!0)},async()=>{await $(!1)},async e=>{await T(e)}]}class Fe extends ne{constructor(e){super(),te(this,e,Be,_e,a,{octaves:18,keysPressed:0,verbose:1},null,[-1,-1])}}function Ue(e,t,n){const o=e.slice();return o[28]=t[n],o}function Re(e,t,n){const o=e.slice();return o[31]=t[n],o[32]=t,o[33]=n,o}function We(e){let t,n,o=e[31];const r=()=>e[20](t,o),a=()=>e[20](null,o);let i={noteNum:e[31],keyWidth:e[10],pressed:e[0].includes(e[31]),numberInKey:be(e[2],e[31])};return t=new ie({props:i}),r(),t.$on("notepressed",e[21]),t.$on("notereleased",e[22]),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){o!==e[31]&&(a(),o=e[31],r());const i={};16&n[0]&&(i.noteNum=e[31]),1024&n[0]&&(i.keyWidth=e[10]),17&n[0]&&(i.pressed=e[0].includes(e[31])),20&n[0]&&(i.numberInKey=be(e[2],e[31])),t.$set(i)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){a(),z(t,e)}}}function Pe(e){let t,n,o,r=e[4],a=[];for(let t=0;t<r.length;t+=1)a[t]=We(Re(e,r,t));const i=e=>X(a[e],1,1,(()=>{a[e]=null}));return{c(){t=v("div"),n=v("div");for(let e=0;e<a.length;e+=1)a[e].c();q(t,"class","keyboard")},m(e,r){p(e,t,r),f(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);o=!0},p(e,t){if(15893&t[0]){let o;for(r=e[4],o=0;o<r.length;o+=1){const i=Re(e,r,o);a[o]?(a[o].p(i,t),L(a[o],1)):(a[o]=We(i),a[o].c(),L(a[o],1),a[o].m(n,null))}for(Z(),o=r.length;o<a.length;o+=1)i(o);Y()}},i(e){if(!o){for(let e=0;e<r.length;e+=1)L(a[e]);o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)X(a[e]);o=!1},d(e){e&&m(t),h(a,e)}}}function De(t){let n,o,r;return{c(){n=v("button"),n.textContent="Guess Interval"},m(e,a){p(e,n,a),o||(r=A(n,"mousedown",t[23]),o=!0)},p:e,d(e){e&&m(n),o=!1,r()}}}function je(t){let n,o,r;return{c(){n=v("button"),n.textContent="Replay"},m(e,a){p(e,n,a),o||(r=A(n,"mousedown",t[24]),o=!0)},p:e,d(e){e&&m(n),o=!1,r()}}}function Je(e){let t,n=e[8],o=[];for(let t=0;t<n.length;t+=1)o[t]=Ve(Ue(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=b()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);p(e,t,n)},p(e,r){if(256&r[0]){let a;for(n=e[8],a=0;a<n.length;a+=1){const i=Ue(e,n,a);o[a]?o[a].p(i,r):(o[a]=Ve(i),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(e){h(o,e),e&&m(t)}}}function Ve(e){let t,n,o=e[28]+"";return{c(){t=v("div"),n=g(o)},m(e,o){p(e,t,o),f(t,n)},p(e,t){256&t[0]&&o!==(o=e[28]+"")&&k(n,o)},d(e){e&&m(t)}}}function Ge(t){let n,r,i,u,l,c,s,d,h,w,k,M,$,T,I,E,C,O,_,K=t[2];W(t[16]);let N=Pe(t),B=!t[5]&&t[6]&&De(t),F=t[5]&&je(t),U=t[1]&&Je(t);return{c(){n=v("label"),r=g("Root Note\n    "),i=v("input"),u=y(),l=v("input"),c=y(),s=v("label"),d=g("Random Root\n    "),h=v("input"),w=y(),k=v("ol"),k.innerHTML="<li>Happy Birthday to You</li> \n    <li>Rudolph The Red-Nosed Reindeer</li> \n    <li>Oh when the Saints</li> \n    <li>Here Comes the Bride</li> \n    <li>Star Wars</li> \n    <li>It Came Upon a Midnight Clear</li> \n    <li>Willy Wonka (Pure Imagination)</li> \n    <li>Over the Rainbow</li>",M=y(),N.c(),$=y(),B&&B.c(),T=y(),F&&F.c(),I=y(),U&&U.c(),E=b(),q(i,"type","number"),q(i,"min",Ze),q(i,"max",Ye),q(l,"type","range"),q(l,"min",Ze),q(l,"max",Ye),q(h,"type","checkbox")},m(e,o){p(e,n,o),f(n,r),f(n,i),S(i,t[2]),f(n,u),f(n,l),S(l,t[2]),p(e,c,o),p(e,s,o),f(s,d),f(s,h),h.checked=t[7],p(e,w,o),p(e,k,o),p(e,M,o),N.m(e,o),p(e,$,o),B&&B.m(e,o),p(e,T,o),F&&F.m(e,o),p(e,I,o),U&&U.m(e,o),p(e,E,o),C=!0,O||(_=[A(window,"resize",t[16]),A(i,"input",t[17]),A(l,"change",t[18]),A(l,"input",t[18]),A(h,"change",t[19])],O=!0)},p(t,n){4&n[0]&&x(i.value)!==t[2]&&S(i,t[2]),4&n[0]&&S(l,t[2]),128&n[0]&&(h.checked=t[7]),4&n[0]&&a(K,K=t[2])?(Z(),X(N,1,1,e),Y(),N=Pe(t),N.c(),L(N),N.m($.parentNode,$)):N.p(t,n),!t[5]&&t[6]?B?B.p(t,n):(B=De(t),B.c(),B.m(T.parentNode,T)):B&&(B.d(1),B=null),t[5]?F?F.p(t,n):(F=je(t),F.c(),F.m(I.parentNode,I)):F&&(F.d(1),F=null),t[1]?U?U.p(t,n):(U=Je(t),U.c(),U.m(E.parentNode,E)):U&&(U.d(1),U=null)},i(e){C||(L(N),C=!0)},o(e){X(N),C=!1},d(e){e&&m(n),e&&m(c),e&&m(s),e&&m(w),e&&m(k),e&&m(M),N.d(e),e&&m($),B&&B.d(e),e&&m(T),F&&F.d(e),e&&m(I),U&&U.d(e),e&&m(E),O=!1,o(_)}}}let Ze=48,Ye=72;function Le(e,t,n){let o,r,a,i,{octaves:u=2}=t,{keysPressed:l=[]}=t,{verbose:c}=t,s=60,d=!0,f=!1,p=[];const m=e=>new Promise((t=>setTimeout(t,e)));function h(e){e<r[0]&&(e+=12*u);let t=Math.floor(e/(12*u)),n=(e-s)%(12*u);return t%(u+1)!=0||0!=n&&1!=n?n:12*u+n}function v(e,t=127,o=!0){var r,i,u;if(o&&!d)return;n(8,p=[`Note ${e} was pressed!`,...p]);let l=be(s,e);if(a){if(!l)return;l===a?(null===(r=A[h(e)])||void 0===r||r.markCorrect(),n(5,a=void 0)):null===(i=A[h(e)])||void 0===i||i.markWrong()}pe.noteOn(0,e,t,0);let c=h(e);null===(u=A[c])||void 0===u||u.playKey()}function g(e){var t;n(8,p=[`Note ${e} was released!`,...p]),pe.noteOff(0,e,0);let o=h(e);null===(t=A[o])||void 0===t||t.stopPlayingKey()}function y(e){var t;if(c){let t="MIDI message received at timestamp "+e.timeStamp+"["+e.data.length+" bytes]: ";for(let n=0;n<e.data.length;n++)t+="0x"+e.data[n].toString(16)+" ",e.data;console.log(t)}const n=e.data[0],o=null===(t=A[h(e.data[1])])||void 0===t?void 0:t.getNote(),r=e.data.length>2?e.data[2]:0;switch(n){case 144:r>0?v(o):g(o);break;case 128:g(o)}}O((async()=>{pe.loadPlugin({soundfontUrl:"./soundfont/",instrument:"acoustic_grand_piano",onprogress(e,t){console.log(e,t)},onsuccess(){pe.setVolume(0,127)}});try{let e=await navigator.requestMIDIAccess();console.log("MIDI ready!"),c&&function(e){for(const t of e.inputs){const e=t[1];console.log("Input port [type:'"+e.type+"'] id:'"+e.id+"' manufacturer:'"+e.manufacturer+"' name:'"+e.name+"' version:'"+e.version+"'")}for(const t of e.outputs){const e=t[1];console.log("Output port [type:'"+e.type+"'] id:'"+e.id+"' manufacturer:'"+e.manufacturer+"' name:'"+e.name+"' version:'"+e.version+"'")}}(e),e.inputs.forEach((e=>{e.onmidimessage=y}))}catch(e){console.log("Failed to get MIDI access - "+e)}}));let b,A={};async function w(e){n(6,d=!1);const t=a;n(5,a=void 0),e&&f&&n(2,s=Math.floor(Math.random()*(Ye-Ze))+Ze);v(s,127,!1),await m(500),g(s),await m(100),e?(i=Math.floor(8*Math.random()),n(5,a=i+1),8===a&&n(5,a=1)):n(5,a=t);let o=ye(s,i);pe.noteOn(0,o,127,0),await m(500),pe.noteOff(0,o,0),n(6,d=!0)}return e.$$set=e=>{"octaves"in e&&n(15,u=e.octaves),"keysPressed"in e&&n(0,l=e.keysPressed),"verbose"in e&&n(1,c=e.verbose)},e.$$.update=()=>{if(32772&e.$$.dirty[0]){let e=0,t=12*u+1;![1,3,6,8,10].includes(s%12)||(e-=1,t+=1);const o=Array.from({length:t-e},((t,n)=>n+e));n(4,r=o.map((e=>e+(s-12*Math.floor(u/2)))))}32776&e.$$.dirty[0]&&n(10,o=Math.min((b-36/u)/(8*u),56))},[l,c,s,b,r,a,d,f,p,A,o,h,v,g,w,u,function(){n(3,b=window.innerWidth)},function(){s=x(this.value),n(2,s)},function(){s=x(this.value),n(2,s)},function(){f=this.checked,n(7,f)},function(e,t){N[e?"unshift":"push"]((()=>{A[h(t)]=e,n(9,A)}))},({detail:e})=>v(e),({detail:e})=>g(e),async()=>{await w(!0)},async()=>{await w(!1)}]}class Xe extends ne{constructor(e){super(),te(this,e,Le,Ge,a,{octaves:15,keysPressed:0,verbose:1},null,[-1,-1])}}function He(e,t,n){const o=e.slice();return o[31]=t[n],o}function Qe(e,t,n){const o=e.slice();return o[34]=t[n],o[35]=t,o[36]=n,o}function ze(e){let t,n,o=e[34];const r=()=>e[20](t,o),a=()=>e[20](null,o);let i={noteNum:e[34],keyWidth:e[10],pressed:e[0].includes(e[34]),numberInKey:be(e[2],e[34])};return t=new ie({props:i}),r(),t.$on("notepressed",e[21]),t.$on("notereleased",e[22]),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){o!==e[34]&&(a(),o=e[34],r());const i={};16&n[0]&&(i.noteNum=e[34]),1024&n[0]&&(i.keyWidth=e[10]),17&n[0]&&(i.pressed=e[0].includes(e[34])),20&n[0]&&(i.numberInKey=be(e[2],e[34])),t.$set(i)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){a(),z(t,e)}}}function et(e){let t,n,o,r=e[4],a=[];for(let t=0;t<r.length;t+=1)a[t]=ze(Qe(e,r,t));const i=e=>X(a[e],1,1,(()=>{a[e]=null}));return{c(){t=v("div"),n=v("div");for(let e=0;e<a.length;e+=1)a[e].c();q(t,"class","keyboard")},m(e,r){p(e,t,r),f(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);o=!0},p(e,t){if(15893&t[0]){let o;for(r=e[4],o=0;o<r.length;o+=1){const i=Qe(e,r,o);a[o]?(a[o].p(i,t),L(a[o],1)):(a[o]=ze(i),a[o].c(),L(a[o],1),a[o].m(n,null))}for(Z(),o=r.length;o<a.length;o+=1)i(o);Y()}},i(e){if(!o){for(let e=0;e<r.length;e+=1)L(a[e]);o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)X(a[e]);o=!1},d(e){e&&m(t),h(a,e)}}}function tt(t){let n,o,r;return{c(){n=v("button"),n.textContent="Guess Note"},m(e,a){p(e,n,a),o||(r=A(n,"mousedown",t[23]),o=!0)},p:e,d(e){e&&m(n),o=!1,r()}}}function nt(t){let n,o,r;return{c(){n=v("button"),n.textContent="Replay"},m(e,a){p(e,n,a),o||(r=A(n,"mousedown",t[24]),o=!0)},p:e,d(e){e&&m(n),o=!1,r()}}}function ot(e){let t,n=e[8],o=[];for(let t=0;t<n.length;t+=1)o[t]=rt(He(e,n,t));return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=b()},m(e,n){for(let t=0;t<o.length;t+=1)o[t].m(e,n);p(e,t,n)},p(e,r){if(256&r[0]){let a;for(n=e[8],a=0;a<n.length;a+=1){const i=He(e,n,a);o[a]?o[a].p(i,r):(o[a]=rt(i),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=n.length}},d(e){h(o,e),e&&m(t)}}}function rt(e){let t,n,o=e[31]+"";return{c(){t=v("div"),n=g(o)},m(e,o){p(e,t,o),f(t,n)},p(e,t){256&t[0]&&o!==(o=e[31]+"")&&k(n,o)},d(e){e&&m(t)}}}function at(t){let n,r,i,u,l,c,s,d,h,w,k,M,$,T,I,E,C,O=t[2];W(t[16]);let _=et(t),K=!t[5]&&t[6]&&tt(t),N=t[5]&&nt(t),B=t[1]&&ot(t);return{c(){n=v("label"),r=g("Root Note\n    "),i=v("input"),u=y(),l=v("input"),c=y(),s=v("label"),d=g("Random Root\n    "),h=v("input"),w=y(),_.c(),k=y(),K&&K.c(),M=y(),N&&N.c(),$=y(),B&&B.c(),T=b(),q(i,"type","number"),q(i,"min",it),q(i,"max",ut),q(l,"type","range"),q(l,"min",it),q(l,"max",ut),q(h,"type","checkbox")},m(e,o){p(e,n,o),f(n,r),f(n,i),S(i,t[2]),f(n,u),f(n,l),S(l,t[2]),p(e,c,o),p(e,s,o),f(s,d),f(s,h),h.checked=t[7],p(e,w,o),_.m(e,o),p(e,k,o),K&&K.m(e,o),p(e,M,o),N&&N.m(e,o),p(e,$,o),B&&B.m(e,o),p(e,T,o),I=!0,E||(C=[A(window,"resize",t[16]),A(i,"input",t[17]),A(l,"change",t[18]),A(l,"input",t[18]),A(h,"change",t[19])],E=!0)},p(t,n){4&n[0]&&x(i.value)!==t[2]&&S(i,t[2]),4&n[0]&&S(l,t[2]),128&n[0]&&(h.checked=t[7]),4&n[0]&&a(O,O=t[2])?(Z(),X(_,1,1,e),Y(),_=et(t),_.c(),L(_),_.m(k.parentNode,k)):_.p(t,n),!t[5]&&t[6]?K?K.p(t,n):(K=tt(t),K.c(),K.m(M.parentNode,M)):K&&(K.d(1),K=null),t[5]?N?N.p(t,n):(N=nt(t),N.c(),N.m($.parentNode,$)):N&&(N.d(1),N=null),t[1]?B?B.p(t,n):(B=ot(t),B.c(),B.m(T.parentNode,T)):B&&(B.d(1),B=null)},i(e){I||(L(_),I=!0)},o(e){X(_),I=!1},d(e){e&&m(n),e&&m(c),e&&m(s),e&&m(w),_.d(e),e&&m(k),K&&K.d(e),e&&m(M),N&&N.d(e),e&&m($),B&&B.d(e),e&&m(T),E=!1,o(C)}}}let it=48,ut=72;function lt(e,t,n){let o,r,a,i,{octaves:u=2}=t,{keysPressed:l=[]}=t,{verbose:c}=t,s=60,d=!0,f=!1,p=[];const m=e=>new Promise((t=>setTimeout(t,e)));function h(e){e<r[0]&&(e+=12*u);let t=Math.floor(e/(12*u)),n=(e-s)%(12*u);return t%(u+1)!=0||0!=n&&1!=n?n:12*u+n}function v(e,t=127,o=!0){var r,i;if(o&&!d)return;n(8,p=[`Note ${e} was pressed!`,...p]);let u=be(s,e);if(a){if(!u)return;if(u===a)return n(5,a=void 0),n(6,d=!1),void setTimeout((async()=>{var t;let o,r=ge(s);u>=5?o=r.slice(u-1):(o=r.slice(0,u),o.reverse()),1==o.length&&e!=s&&(o=[e]);let a=!0;for(const e of o){v(e,127,!1);let n=a?500:300;null===(t=A[h(e)])||void 0===t||t.markCorrect(n),await m(n),g(e),a=!1}n(6,d=!0)}),0);null===(r=A[h(e)])||void 0===r||r.markWrong()}pe.noteOn(0,e,t,0);let l=h(e);null===(i=A[l])||void 0===i||i.playKey()}function g(e){var t;n(8,p=[`Note ${e} was released!`,...p]),pe.noteOff(0,e,0);let o=h(e);null===(t=A[o])||void 0===t||t.stopPlayingKey()}function y(e){var t;if(c){let t="MIDI message received at timestamp "+e.timeStamp+"["+e.data.length+" bytes]: ";for(let n=0;n<e.data.length;n++)t+="0x"+e.data[n].toString(16)+" ",e.data;console.log(t)}const n=e.data[0],o=null===(t=A[h(e.data[1])])||void 0===t?void 0:t.getNote(),r=e.data.length>2?e.data[2]:0;switch(n){case 144:r>0?v(o):g(o);break;case 128:g(o)}}O((async()=>{pe.loadPlugin({soundfontUrl:"./soundfont/",instrument:"acoustic_grand_piano",onprogress(e,t){console.log(e,t)},onsuccess(){pe.setVolume(0,127)}});try{let e=await navigator.requestMIDIAccess();console.log("MIDI ready!"),c&&function(e){for(const t of e.inputs){const e=t[1];console.log("Input port [type:'"+e.type+"'] id:'"+e.id+"' manufacturer:'"+e.manufacturer+"' name:'"+e.name+"' version:'"+e.version+"'")}for(const t of e.outputs){const e=t[1];console.log("Output port [type:'"+e.type+"'] id:'"+e.id+"' manufacturer:'"+e.manufacturer+"' name:'"+e.name+"' version:'"+e.version+"'")}}(e),e.inputs.forEach((e=>{e.onmidimessage=y}))}catch(e){console.log("Failed to get MIDI access - "+e)}}));let b,A={};function w(e,t=se.Major,n=de.Root){k(e,t,!0,n)}function q(e,t=se.Major,n=de.Root){k(e,t,!1,n)}function k(e,t,n,o){he(e,t,o).forEach((e=>{n?v(e,127,!1):g(e)}))}async function S(e){n(6,d=!1);const t=a;n(5,a=void 0),e&&f&&n(2,s=Math.floor(Math.random()*(ut-it))+it);let o=[[0,se.Major,de.Root],[-7,se.Major,de.Second],[-5,se.Major,de.First],[0,se.Major,de.Root]];for(const[e,t,n]of o)w(s+e,t,n),await m(500),q(s+e,t,n),await m(100);await m(500),e?(i=Math.floor(8*Math.random()),n(5,a=i+1),8===a&&n(5,a=1)):n(5,a=t);let r=ye(s,i);pe.noteOn(0,r,127,0),await m(500),pe.noteOff(0,r,0),n(6,d=!0)}return e.$$set=e=>{"octaves"in e&&n(15,u=e.octaves),"keysPressed"in e&&n(0,l=e.keysPressed),"verbose"in e&&n(1,c=e.verbose)},e.$$.update=()=>{if(32772&e.$$.dirty[0]){let e=0,t=12*u+1;![1,3,6,8,10].includes(s%12)||(e-=1,t+=1);const o=Array.from({length:t-e},((t,n)=>n+e));n(4,r=o.map((e=>e+(s-12*Math.floor(u/2)))))}32776&e.$$.dirty[0]&&n(10,o=Math.min((b-36/u)/(8*u),56))},[l,c,s,b,r,a,d,f,p,A,o,h,v,g,S,u,function(){n(3,b=window.innerWidth)},function(){s=x(this.value),n(2,s)},function(){s=x(this.value),n(2,s)},function(){f=this.checked,n(7,f)},function(e,t){N[e?"unshift":"push"]((()=>{A[h(t)]=e,n(9,A)}))},({detail:e})=>v(e),({detail:e})=>g(e),async()=>{await S(!0)},async()=>{await S(!1)}]}class ct extends ne{constructor(e){super(),te(this,e,lt,at,a,{octaves:15,keysPressed:0,verbose:1},null,[-1,-1])}}const st=e=>({}),dt=e=>({});function ft(e){let t,n,r,a,i,l,h,g,b;const w=e[4].header,x=u(w,e,e[3],dt),k=e[4].default,S=u(k,e,e[3],null);return{c(){t=v("div"),n=y(),r=v("div"),x&&x.c(),a=y(),S&&S.c(),i=y(),l=v("button"),l.textContent="Close",q(t,"class","modal-background svelte-1v9i8a4"),l.autofocus=!0,q(l,"class","svelte-1v9i8a4"),q(r,"class","modal svelte-1v9i8a4"),q(r,"role","dialog"),q(r,"aria-modal","true")},m(o,u){p(o,t,u),p(o,n,u),p(o,r,u),x&&x.m(r,null),f(r,a),S&&S.m(r,null),f(r,i),f(r,l),e[5](r),h=!0,l.focus(),g||(b=[A(window,"keydown",e[2]),A(t,"click",e[1]),A(l,"click",e[1])],g=!0)},p(e,[t]){x&&x.p&&(!h||8&t)&&s(x,w,e,e[3],h?c(w,e[3],t,st):d(e[3]),dt),S&&S.p&&(!h||8&t)&&s(S,k,e,e[3],h?c(k,e[3],t,null):d(e[3]),null)},i(e){h||(L(x,e),L(S,e),h=!0)},o(e){X(x,e),X(S,e),h=!1},d(a){a&&m(t),a&&m(n),a&&m(r),x&&x.d(a),S&&S.d(a),e[5](null),g=!1,o(b)}}}function pt(e,t,n){let{$$slots:o={},$$scope:r}=t;const a=_(),i=()=>a("close");let u;const l="undefined"!=typeof document&&document.activeElement;return l&&function(e){C().$$.on_destroy.push(e)}((()=>{l.focus()})),e.$$set=e=>{"$$scope"in e&&n(3,r=e.$$scope)},[u,i,e=>{if("Escape"!==e.key){if("Tab"===e.key){const t=u.querySelectorAll("*"),n=Array.from(t).filter((e=>e.tabIndex>=0));let o=n.indexOf(document.activeElement);-1===o&&e.shiftKey&&(o=0),o+=n.length+(e.shiftKey?-1:1),o%=n.length,n[o].focus(),e.preventDefault()}}else i()},r,o,function(e){N[e?"unshift":"push"]((()=>{u=e,n(0,u)}))}]}class mt extends ne{constructor(e){super(),te(this,e,pt,ft,a,{})}}const ht=[];function vt(t,n=e){let o;const r=new Set;function i(e){if(a(t,e)&&(t=e,o)){const e=!ht.length;for(const e of r)e[1](),ht.push(e,t);if(e){for(let e=0;e<ht.length;e+=2)ht[e][0](ht[e+1]);ht.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,u=e){const l=[a,u];return r.add(l),1===r.size&&(o=n(i)||e),a(t),()=>{r.delete(l),0===r.size&&(o(),o=null)}}}}const gt=vt(1),yt=vt(!1),bt=e=>({}),At=e=>({});function wt(e){let t,n;return t=new mt({props:{$$slots:{default:[qt]},$$scope:{ctx:e}}}),t.$on("close",e[10]),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){const o={};2054&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function qt(t){let n,r,a,i,l,h,b,w,x,k,S,M,$,T,I,E,C,O,_,K,N,B,F;const U=t[3].header,R=u(U,t,t[11],At),W=R||function(t){let n;return{c(){n=v("h1"),n.textContent="Settings"},m(e,t){p(e,n,t)},p:e,d(e){e&&m(n)}}}();return{c(){W&&W.c(),n=y(),r=v("h2"),r.textContent="Octaves",a=y(),i=v("label"),l=v("input"),h=g("\n      One"),b=y(),w=v("label"),x=v("input"),k=g("\n      Two"),S=y(),M=v("label"),$=v("input"),T=g("\n      Three"),I=y(),E=v("h2"),E.textContent="Debug",C=y(),O=v("label"),_=g("Enable logging:\n      "),K=v("input"),q(l,"type","radio"),q(l,"name","octaves"),l.__value=1,l.value=l.__value,t[6][0].push(l),q(x,"type","radio"),q(x,"name","octaves"),x.__value=2,x.value=x.__value,t[6][0].push(x),q($,"type","radio"),q($,"name","octaves"),$.__value=3,$.value=$.__value,t[6][0].push($),q(K,"type","checkbox")},m(e,o){W&&W.m(e,o),p(e,n,o),p(e,r,o),p(e,a,o),p(e,i,o),f(i,l),l.checked=l.__value===t[1],f(i,h),p(e,b,o),p(e,w,o),f(w,x),x.checked=x.__value===t[1],f(w,k),p(e,S,o),p(e,M,o),f(M,$),$.checked=$.__value===t[1],f(M,T),p(e,I,o),p(e,E,o),p(e,C,o),p(e,O,o),f(O,_),f(O,K),K.checked=t[2],N=!0,B||(F=[A(l,"change",t[5]),A(x,"change",t[7]),A($,"change",t[8]),A(K,"change",t[9])],B=!0)},p(e,t){R&&R.p&&(!N||2048&t)&&s(R,U,e,e[11],N?c(U,e[11],t,bt):d(e[11]),At),2&t&&(l.checked=l.__value===e[1]),2&t&&(x.checked=x.__value===e[1]),2&t&&($.checked=$.__value===e[1]),4&t&&(K.checked=e[2])},i(e){N||(L(W,e),N=!0)},o(e){X(W,e),N=!1},d(e){W&&W.d(e),e&&m(n),e&&m(r),e&&m(a),e&&m(i),t[6][0].splice(t[6][0].indexOf(l),1),e&&m(b),e&&m(w),t[6][0].splice(t[6][0].indexOf(x),1),e&&m(S),e&&m(M),t[6][0].splice(t[6][0].indexOf($),1),e&&m(I),e&&m(E),e&&m(C),e&&m(O),B=!1,o(F)}}}function xt(e){let t,n,o,r,a,i,u=e[0]&&wt(e);return{c(){t=v("button"),t.textContent="⚙️ Settings",n=y(),u&&u.c(),o=b(),q(t,"display","inline-block;")},m(l,c){p(l,t,c),p(l,n,c),u&&u.m(l,c),p(l,o,c),r=!0,a||(i=A(t,"click",e[4]),a=!0)},p(e,[t]){e[0]?u?(u.p(e,t),1&t&&L(u,1)):(u=wt(e),u.c(),L(u,1),u.m(o.parentNode,o)):u&&(Z(),X(u,1,1,(()=>{u=null})),Y())},i(e){r||(L(u),r=!0)},o(e){X(u),r=!1},d(e){e&&m(t),e&&m(n),u&&u.d(e),e&&m(o),a=!1,i()}}}function kt(e,t,n){let o,r;i(e,gt,(e=>n(1,o=e))),i(e,yt,(e=>n(2,r=e)));let{$$slots:a={},$$scope:u}=t,l=!1;return e.$$set=e=>{"$$scope"in e&&n(11,u=e.$$scope)},[l,o,r,a,()=>n(0,l=!0),function(){o=this.__value,gt.set(o)},[[]],function(){o=this.__value,gt.set(o)},function(){o=this.__value,gt.set(o)},function(){r=this.checked,yt.set(r)},()=>n(0,l=!1),u]}class St extends ne{constructor(e){super(),te(this,e,kt,xt,a,{})}}function Mt(e,t,n){const o=e.slice();return o[5]=t[n],o}function $t(t){let n,o,r,a=t[5]+"";return{c(){n=v("option"),o=g(a),n.__value=r=t[5],n.value=n.__value},m(e,t){p(e,n,t),f(n,o)},p:e,d(e){e&&m(n)}}}function Tt(e){let t,n;return t=new Fe({props:{octaves:e[1],verbose:e[2]}}),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.octaves=e[1]),4&n&&(o.verbose=e[2]),t.$set(o)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function It(e){let t,n;return t=new Xe({props:{octaves:e[1],verbose:e[2]}}),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.octaves=e[1]),4&n&&(o.verbose=e[2]),t.$set(o)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function Et(e){let t,n;return t=new ct({props:{octaves:e[1],verbose:e[2]}}),{c(){H(t.$$.fragment)},m(e,o){Q(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.octaves=e[1]),4&n&&(o.verbose=e[2]),t.$set(o)},i(e){n||(L(t.$$.fragment,e),n=!0)},o(e){X(t.$$.fragment,e),n=!1},d(e){z(t,e)}}}function Ct(e){let t,n,o,r;const a=[Et,It,Tt],i=[];function u(e,t){return"note"==e[0]?0:"interval"==e[0]?1:"chord"==e[0]?2:-1}return~(t=u(e))&&(n=i[t]=a[t](e)),{c(){n&&n.c(),o=b()},m(e,n){~t&&i[t].m(e,n),p(e,o,n),r=!0},p(e,r){let l=t;t=u(e),t===l?~t&&i[t].p(e,r):(n&&(Z(),X(i[l],1,1,(()=>{i[l]=null})),Y()),~t?(n=i[t],n?n.p(e,r):(n=i[t]=a[t](e),n.c()),L(n,1),n.m(o.parentNode,o)):n=null)},i(e){r||(L(n),r=!0)},o(e){X(n),r=!1},d(e){~t&&i[t].d(e),e&&m(o)}}}function Ot(t){let n,o,r,i,u,l,c,s,d,w,x,k,S,M,T=t[1];u=new St({});let I=t[3],E=[];for(let e=0;e<I.length;e+=1)E[e]=$t(Mt(t,I,e));let C=Ct(t);return{c(){n=y(),o=v("div"),r=v("h1"),r.innerHTML='<a href="https://github.com/lukemcneil/ear-game">Ear Game</a>',i=y(),H(u.$$.fragment),l=y(),c=v("label"),s=g("Mode\n    "),d=v("select");for(let e=0;e<E.length;e+=1)E[e].c();w=y(),C.c(),x=b(),document.title="Ear Game",q(o,"class","nav svelte-4cokm4"),void 0===t[0]&&W((()=>t[4].call(d)))},m(e,a){p(e,n,a),p(e,o,a),f(o,r),f(o,i),Q(u,o,null),p(e,l,a),p(e,c,a),f(c,s),f(c,d);for(let e=0;e<E.length;e+=1)E[e].m(d,null);$(d,t[0]),p(e,w,a),C.m(e,a),p(e,x,a),k=!0,S||(M=A(d,"change",t[4]),S=!0)},p(t,[n]){if(8&n){let e;for(I=t[3],e=0;e<I.length;e+=1){const o=Mt(t,I,e);E[e]?E[e].p(o,n):(E[e]=$t(o),E[e].c(),E[e].m(d,null))}for(;e<E.length;e+=1)E[e].d(1);E.length=I.length}9&n&&$(d,t[0]),2&n&&a(T,T=t[1])?(Z(),X(C,1,1,e),Y(),C=Ct(t),C.c(),L(C),C.m(x.parentNode,x)):C.p(t,n)},i(e){k||(L(u.$$.fragment,e),L(C),k=!0)},o(e){X(u.$$.fragment,e),X(C),k=!1},d(e){e&&m(n),e&&m(o),z(u),e&&m(l),e&&m(c),h(E,e),e&&m(w),e&&m(x),C.d(e),S=!1,M()}}}function _t(e,t,n){let o,r;i(e,gt,(e=>n(1,o=e))),i(e,yt,(e=>n(2,r=e)));const a=["note","interval","chord"];let u=a[0];return[u,o,r,a,function(){u=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,u),n(3,a)}]}return new class extends ne{constructor(e){super(),te(this,e,_t,Ot,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
